import{e as E,X as M,f as m,N as h,Y as O,c as o,a as s,p as i,F as S,q as R,b as T,d as _,g,s as d,n as V,Z as l,k as A,h as F,_ as P,o as a}from"./index-DA11XDlS.js";import{E as Y}from"./eye-DNttFUWn.js";import{S as y}from"./sparkles-tsZM6BNv.js";import{S as $}from"./scroll-CZOg3h_v.js";import{u as j}from"./use-message--i6DiThE.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-DiiZaxVK.js";const w={class:"detection-page"},G={class:"bg-effects"},L={key:0,class:"particles"},X={key:0,class:"intro-stage"},Z={class:"elder-avatar"},H={key:1,class:"detecting-stage"},J={class:"orb-core"},K={key:0,class:"detecting-text"},Q={key:2,class:"result-stage"},U={class:"result-card"},W={class:"card-header"},ss={class:"dao-name-section"},ts={class:"dao-name"},es={class:"root-section"},os={class:"root-info"},as={class:"root-element"},ls={class:"value"},rs={class:"root-desc"},ns={class:"root-bonus"},is={class:"bonus-item"},cs={class:"bonus-value"},ds={key:0,class:"attributes"},us={class:"attr-label"},vs={class:"attr-value"},ps={class:"elder-comment"},ms={key:0},_s={key:1},gs={key:2},bs={key:3},ys={key:4},fs=E({__name:"SpiritRootDetection",setup(ks){const x=F(),I=M(),C=j(),n=m("intro"),e=m(null),f=m(""),u=m(!1),c=m(null);let v=null;const z=async()=>{n.value="detecting",u.value=!0;const b=Object.values(P);let t=0;const p=30;let r=null;try{r=await I.detectSpiritRoot()}catch(D){v&&clearInterval(v),u.value=!1,n.value="intro",C.error(A(D,"灵根检测失败"));return}v=setInterval(()=>{c.value=b[Math.floor(Math.random()*b.length)]??null,t++,t>=p&&(v&&clearInterval(v),e.value=r.spiritRoot,f.value=r.character.name,c.value=e.value,u.value=!1,setTimeout(()=>{n.value="result"},500))},100)},N=()=>{x.push("/")},k=h(()=>e.value?O[e.value.rarity]:null),B=h(()=>c.value||e.value);return(b,t)=>(a(),o("div",w,[s("div",G,[t[0]||(t[0]=s("div",{class:"bg-orb bg-orb-1"},null,-1)),t[1]||(t[1]=s("div",{class:"bg-orb bg-orb-2"},null,-1)),n.value==="detecting"?(a(),o("div",L,[(a(),o(S,null,R(20,p=>s("div",{class:"particle",key:p})),64))])):i("",!0)]),n.value==="intro"?(a(),o("div",X,[s("div",Z,[_(g(Y),{size:48})]),t[3]||(t[3]=T('<h1 class="title" data-v-c85c3312>天机阁</h1><p class="subtitle" data-v-c85c3312>灵根测试</p><div class="dialog-box" data-v-c85c3312><p class="dialog-text" data-v-c85c3312>「凡人若想踏入仙途，必先明晰自身根骨。」</p><p class="dialog-text" data-v-c85c3312>「吾乃天机阁长老，可为你测定灵根资质。」</p><p class="dialog-text highlight" data-v-c85c3312>「你可愿一试？」</p></div>',3)),s("button",{class:"detect-btn",onClick:z},[_(g(y),{size:20}),t[2]||(t[2]=s("span",null,"开始测定",-1))])])):i("",!0),n.value==="detecting"?(a(),o("div",H,[s("div",{class:V(["detection-orb",{animating:u.value}])},[s("div",J,[_(g(y),{size:40,style:d({color:B.value?.color||"#c9a959"})},null,8,["style"])]),t[4]||(t[4]=s("div",{class:"orb-ring ring-1"},null,-1)),t[5]||(t[5]=s("div",{class:"orb-ring ring-2"},null,-1)),t[6]||(t[6]=s("div",{class:"orb-ring ring-3"},null,-1))],2),u.value?(a(),o("div",K,[t[7]||(t[7]=s("p",null,"正在探查灵根...",-1)),c.value?(a(),o("p",{key:0,class:"temp-root",style:d({color:c.value.color})},l(c.value.name),5)):i("",!0)])):i("",!0)])):i("",!0),n.value==="result"?(a(),o("div",Q,[s("div",U,[s("div",W,[_(g($),{size:24}),t[8]||(t[8]=s("span",null,"灵根鉴定书",-1))]),s("div",ss,[t[9]||(t[9]=s("span",{class:"label"},"道号",-1)),s("span",ts,l(f.value),1)]),s("div",es,[s("div",{class:"root-icon",style:d({background:`linear-gradient(135deg, ${e.value?.color}30, ${e.value?.color}10)`,borderColor:e.value?.color})},[_(g(y),{size:32,style:d({color:e.value?.color})},null,8,["style"])],4),s("div",os,[s("div",{class:"root-name",style:d({color:e.value?.color})},l(e.value?.name),5),s("div",{class:"root-rarity",style:d({color:k.value?.color})},l(k.value?.label)+"灵根",5)])]),s("div",as,[t[10]||(t[10]=s("span",{class:"label"},"五行属性",-1)),s("span",ls,l(e.value?.element),1)]),s("div",rs,[s("p",null,"「"+l(e.value?.description)+"」",1)]),s("div",ns,[s("div",is,[t[11]||(t[11]=s("span",{class:"bonus-label"},"修炼速度",-1)),s("span",cs,"+"+l(e.value?.cultivationBonus)+"%",1)])]),e.value?.attributes?(a(),o("div",ds,[(a(!0),o(S,null,R(e.value.attributes,(p,r)=>(a(),o("div",{class:"attr-item",key:r},[s("span",us,l(r==="attack"?"攻击":r==="defense"?"防御":r==="speed"?"速度":"幸运"),1),s("span",vs,"+"+l(p),1)]))),128))])):i("",!0),t[12]||(t[12]=s("div",{class:"realm-info"},[s("span",{class:"label"},"起始境界"),s("span",{class:"realm"},"炼气期一层")],-1))]),s("div",ps,[e.value?.rarity==="mythic"?(a(),o("p",ms,"「天品灵根！！此乃万中无一之资质，前途不可限量！」")):e.value?.rarity==="legendary"?(a(),o("p",_s,"「地品灵根！资质上佳，好生修炼必成大器。」")):e.value?.rarity==="epic"?(a(),o("p",gs,"「玄品灵根，资质不俗，勤加修炼可有所成。」")):e.value?.rarity==="rare"?(a(),o("p",bs,"「灵品灵根，资质尚可，需比常人更加努力。」")):(a(),o("p",ys,"「凡品灵根，虽资质平平，但修道在于心诚，勿要气馁。」"))]),s("button",{class:"confirm-btn",onClick:N},[...t[13]||(t[13]=[s("span",null,"踏入仙途",-1)])])])):i("",!0)]))}}),Ns=q(fs,[["__scopeId","data-v-c85c3312"]]);export{Ns as default};
