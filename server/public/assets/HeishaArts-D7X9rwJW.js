import{a2 as Ns,bF as F,aa as W,k as Es,e as os,bx as ls,f as m,N as ts,S as is,a0 as Cs,c as o,a as s,p as N,l as H,d as a,g as e,Z as l,F as L,q as G,an as ks,bG as zs,i as Ss,j as I,n as V,bv as as,m as K,o as t,bz as U,a1 as xs,x as As,s as Ms,b as Is,h as Fs}from"./index-DA11XDlS.js";import{G as hs}from"./ghost-ebrS4p_g.js";import{c as X}from"./createLucideIcon-DiiZaxVK.js";import{T as Ts}from"./target-CxCFSND-.js";import{S as _s}from"./search-Cw5mh_gR.js";import{R as ms}from"./refresh-cw-5h0-qbhL.js";import{L as j}from"./loader-circle-BnoPFgCr.js";import{U as ys}from"./users-DzD0wEV-.js";import{C as vs}from"./circle-check-big-B5OYv702.js";import{C as Y}from"./circle-x-B-Ydbwdk.js";import{T as Ps}from"./triangle-alert-vQJa5xBQ.js";import{S as Rs}from"./skull-BAbr3491.js";import{C as ss}from"./clock-Bnzg_83l.js";import{L as Ls}from"./lock-open-CSyDnSWl.js";import{S as es}from"./swords-bfqjVPqN.js";import{C as Hs}from"./crosshair-CUb3FOF1.js";import{_ as rs}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{H as ds}from"./heart-LgXo-eep.js";import{S as Z}from"./sparkles-tsZM6BNv.js";import{Z as O}from"./zap-vMqaBpWc.js";import{F as ns}from"./flame-DuW_991e.js";import{S as ps}from"./shield-BMlq6Nq0.js";import{S as fs}from"./sword-BlVHvUf1.js";import{C as Bs}from"./circle-alert-CQn7xOz3.js";import{S as Ds}from"./star-D9p6u3Oh.js";import{T as Us}from"./trending-up-BXfb3B-f.js";import{H as gs}from"./history-F1M976CY.js";import{X as Vs}from"./x-DGyACQy4.js";import{U as q}from"./user-CXIJJnqr.js";import{T as $s}from"./trophy-B8Qqs7MA.js";import{F as bs}from"./frown-DdlGX0TI.js";import{F as Gs}from"./flag-CeDOnItD.js";import{C as js}from"./chevron-right-BzVHn-hR.js";const qs=X("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);const Ks=X("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const ws=X("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const Zs=X("shield-plus",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9 12h6",key:"1c52cq"}],["path",{d:"M12 9v6",key:"199k2o"}]]);const Os=X("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Xs=X("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),us=Ns("heisha",{state:()=>({isMember:!1,shaEnergy:null,soulSeizeStatus:null,consortTheft:null,extractBuff:null,puppets:[],stolenConsort:null,pvpStatus:null,pvpTargets:[],pvpHistory:[],curseStatus:null,castRecords:[],loading:!1,error:null,lastRefresh:0}),getters:{canSeize(){return this.soulSeizeStatus?.canUse??!1},canSteal(){return this.consortTheft?.canUse??!1},hasStolenConsort(){return this.stolenConsort!==null},canBrainwash(){return this.stolenConsort?this.stolenConsort.brainwashCount<this.stolenConsort.brainwashMaxCount:!1},canExtract(){return this.stolenConsort?this.stolenConsort.extractCount<this.stolenConsort.extractMaxCount:!1},shaBonusPercent(){return this.shaEnergy?.bonusPercent??0},puppetBonusPercent(){return this.soulSeizeStatus?.puppetBonus??0},canPvpChallenge(){return this.pvpStatus?.canChallenge??!1},isCursed(){return this.curseStatus?.isCursed??!1},hasCurseTargets(){return this.castRecords.length>0}},actions:{async fetchStatus(p=!1){if(!(!p&&Date.now()-this.lastRefresh<5e3)){this.loading=!0,this.error=null;try{const d=(await F.getStatus()).data;this.isMember=d.isMember,this.shaEnergy=d.shaEnergy,this.soulSeizeStatus=d.soulSeize,this.consortTheft=d.consortTheft,this.extractBuff=d.extractBuff,this.lastRefresh=Date.now()}catch(i){this.error=Es(i,"è·å–é­”é“ç¦æœ¯çŠ¶æ€å¤±è´¥")}finally{this.loading=!1}}},async fetchPuppets(){try{const p=await F.getPuppets();this.puppets=p.data}catch(p){console.error("è·å–å‚€å„¡åˆ—è¡¨å¤±è´¥:",p)}},async soulSeize(p){this.loading=!0;try{const d=(await F.soulSeize(p)).data;return await this.fetchStatus(!0),await this.fetchPuppets(),d}finally{this.loading=!1}},async releasePuppet(p){this.loading=!0;try{await F.releasePuppet(p),await this.fetchStatus(!0),await this.fetchPuppets()}finally{this.loading=!1}},async fetchStolenConsort(){try{const p=await F.getStolenConsort();this.stolenConsort=p.data}catch(p){console.error("è·å–è¢«çªƒå–ä¾å¦¾å¤±è´¥:",p)}},async stealConsort(p){this.loading=!0;try{const d=(await F.stealConsort(p)).data;return this.stolenConsort=d,await this.fetchStatus(!0),d}finally{this.loading=!1}},async brainwash(){this.loading=!0;try{const i=(await F.brainwash()).data;return await this.fetchStolenConsort(),i}finally{this.loading=!1}},async extract(){this.loading=!0;try{const i=(await F.extract()).data;return await this.fetchStatus(!0),await this.fetchStolenConsort(),i}finally{this.loading=!1}},async fetchPvpStatus(){try{const p=await W.getStatus();this.pvpStatus=p.data}catch(p){console.error("è·å–PvPçŠ¶æ€å¤±è´¥:",p)}},async fetchPvpTargets(p=20){try{const i=await W.getTargets(p);this.pvpTargets=i.data}catch(i){console.error("è·å–PvPç›®æ ‡å¤±è´¥:",i)}},async pvpChallenge(p){this.loading=!0;try{const d=(await W.challenge(p)).data;return await this.fetchPvpStatus(),await this.fetchStatus(!0),d}finally{this.loading=!1}},async fetchPvpHistory(p=20){try{const i=await W.getHistory(p);this.pvpHistory=i.data}catch(i){console.error("è·å–PvPå†å²å¤±è´¥:",i)}},async fetchCurseStatus(){try{const i=(await F.getCurseStatus()).data;this.curseStatus=i.cursed,this.castRecords=i.castRecords}catch(p){console.error("è·å–å’’å°çŠ¶æ€å¤±è´¥:",p)}},async castCurse(p){this.loading=!0;try{const d=(await F.castCurse(p)).data;return await this.fetchCurseStatus(),await this.fetchStatus(!0),d}finally{this.loading=!1}},async harvestCurse(p){this.loading=!0;try{const d=(await F.harvestCurse(p)).data;return await this.fetchCurseStatus(),d}finally{this.loading=!1}},async removeCurse(){this.loading=!0;try{const i=(await F.removeCurse()).data;return await this.fetchCurseStatus(),i}finally{this.loading=!1}}}}),Js={class:"soul-seize-panel"},Qs={class:"status-card"},Ws={class:"status-header"},Ys={class:"status-content"},se={class:"status-item"},ee={class:"value"},te={class:"status-item"},ae={class:"value bonus"},ne={class:"status-item"},oe={key:0,class:"value cooldown"},le={key:1,class:"value ready"},ie={class:"section-title"},re={key:0,class:"empty-state"},ue={key:1,class:"puppet-list"},ce={class:"puppet-info"},de={class:"puppet-avatar"},ve={class:"puppet-details"},he={class:"puppet-name"},pe={class:"puppet-time"},fe=["onClick","disabled"],_e={class:"section-title"},me={class:"target-search"},ye={class:"search-box"},ge=["disabled"],$e={key:2,class:"loading-targets"},be={key:3,class:"empty-state"},we={key:4,class:"target-list"},Ce={class:"target-info"},ke={class:"target-name"},ze={class:"target-details"},Se={class:"realm"},xe={key:0,class:"sect"},Me={class:"target-power"},Te=["disabled","onClick"],Pe={class:"result-icon"},Re={class:"result-title"},He={class:"result-message"},Be={key:0,class:"backlash-info"},Ne=os({__name:"SoulSeizePanel",setup(p){const i=us(),{soulSeizeStatus:d,puppets:E,loading:T}=ls(i),z=m(""),y=m([]),b=m(!1),S=m(!1),C=m(!1),h=m(null),w=m(0);let P=null;const f=ts(()=>i.canSeize&&w.value<=0);function u(R){const v=Math.floor(R/36e5),g=Math.floor(R%36e5/6e4),A=Math.floor(R%6e4/1e3);return v>0?`${v}æ—¶${g}åˆ†${A}ç§’`:g>0?`${g}åˆ†${A}ç§’`:`${A}ç§’`}function _(R){const v=Math.floor(R/6e4),g=Math.floor(R%6e4/1e3);return`${v}åˆ†${g}ç§’`}function B(){d.value?.cooldownMs?w.value=Math.max(0,d.value.cooldownMs-(Date.now()-i.lastRefresh)):w.value=0}async function D(){b.value=!0,S.value=!0;try{await i.fetchPvpTargets(20),z.value.trim()?y.value=i.pvpTargets.filter(R=>R.name.toLowerCase().includes(z.value.toLowerCase())):y.value=i.pvpTargets}finally{b.value=!1}}async function J(R,v){if(f.value)try{const g=await i.soulSeize(R);h.value=g,C.value=!0,B()}catch(g){const A=g instanceof Error?g.message:"å¤ºèˆå¤±è´¥";h.value={success:!1,message:A},C.value=!0}}async function Q(R){try{await i.releasePuppet(R)}catch(v){console.error("é‡Šæ”¾å‚€å„¡å¤±è´¥:",v)}}return is(async()=>{await i.fetchPuppets(),B(),P=setInterval(B,1e3)}),Cs(()=>{P&&clearInterval(P)}),(R,v)=>(t(),o("div",Js,[s("div",Qs,[s("div",Ws,[a(e(hs),{size:20}),v[4]||(v[4]=s("span",null,"å¤ºèˆçŠ¶æ€",-1))]),s("div",Ys,[s("div",se,[v[5]||(v[5]=s("span",{class:"label"},"å‚€å„¡æ•°é‡",-1)),s("span",ee,l(e(d)?.puppetCount||0)+"/"+l(e(d)?.maxPuppets||3),1)]),s("div",te,[v[6]||(v[6]=s("span",{class:"label"},"æˆ˜åŠ›åŠ æˆ",-1)),s("span",ae,"+"+l((e(d)?.puppetBonus||0).toFixed(0))+"%",1)]),s("div",ne,[v[7]||(v[7]=s("span",{class:"label"},"å†·å´çŠ¶æ€",-1)),w.value>0?(t(),o("span",oe,l(u(w.value)),1)):(t(),o("span",le,"å¯ä½¿ç”¨"))])])]),s("div",ie,[a(e(Os),{size:18}),v[8]||(v[8]=s("span",null,"æˆ‘çš„å‚€å„¡",-1))]),e(E).length===0?(t(),o("div",re,[a(e(hs),{size:32}),v[9]||(v[9]=s("span",null,"æš‚æ— å‚€å„¡",-1))])):(t(),o("div",ue,[(t(!0),o(L,null,G(e(E),g=>(t(),o("div",{key:g.id,class:"puppet-card"},[s("div",ce,[s("div",de,[a(e(Rs),{size:20})]),s("div",ve,[s("div",he,l(g.puppetName),1),s("div",pe,[a(e(ss),{size:14}),s("span",null,"å‰©ä½™: "+l(_(g.remainingMs)),1)])])]),s("button",{class:"release-btn",onClick:A=>Q(g.id),disabled:e(T)},[a(e(Ls),{size:16}),v[10]||(v[10]=I(" é‡Šæ”¾ ",-1))],8,fe)]))),128))])),s("div",_e,[a(e(Ts),{size:18}),v[11]||(v[11]=s("span",null,"å¯»æ‰¾ç›®æ ‡",-1))]),s("div",me,[s("div",ye,[a(e(_s),{size:18}),ks(s("input",{"onUpdate:modelValue":v[0]||(v[0]=g=>z.value=g),placeholder:"æœç´¢ç©å®¶åç§°...",onKeyup:Ss(D,["enter"])},null,544),[[zs,z.value]])]),s("button",{class:"search-btn",onClick:D,disabled:e(T)},[a(e(ms),{size:16,class:V({spin:b.value})},null,8,["class"]),v[12]||(v[12]=I(" æœç´¢ ",-1))],8,ge)]),b.value?(t(),o("div",$e,[a(e(j),{size:24,class:"spin"}),v[13]||(v[13]=s("span",null,"æœç´¢ä¸­...",-1))])):y.value.length===0&&S.value?(t(),o("div",be,[a(e(ys),{size:32}),v[14]||(v[14]=s("span",null,"æœªæ‰¾åˆ°å¯å¤ºèˆçš„ç›®æ ‡",-1))])):y.value.length>0?(t(),o("div",we,[(t(!0),o(L,null,G(y.value,g=>(t(),o("div",{key:g.id,class:"target-card"},[s("div",Ce,[s("div",ke,l(g.name),1),s("div",ze,[s("span",Se,l(g.realmName),1),g.sectName?(t(),o("span",xe,l(g.sectName),1)):N("",!0)])]),s("div",Me,[a(e(es),{size:14}),s("span",null,l(g.power),1)]),s("button",{class:"seize-btn",disabled:!f.value||e(T),onClick:A=>J(g.id,g.name)},[a(e(Hs),{size:16}),v[15]||(v[15]=I(" å¤ºèˆ ",-1))],8,Te)]))),128))])):N("",!0),(t(),H(K,{to:"body"},[C.value?(t(),o("div",{key:0,class:"result-modal-overlay",onClick:v[3]||(v[3]=g=>C.value=!1)},[s("div",{class:V(["result-modal",{success:h.value?.success,failure:!h.value?.success}]),onClick:v[2]||(v[2]=as(()=>{},["stop"]))},[s("div",Pe,[h.value?.success?(t(),H(e(vs),{key:0,size:48})):(t(),H(e(Y),{key:1,size:48}))]),s("div",Re,l(h.value?.success?"å¤ºèˆæˆåŠŸ":"å¤ºèˆå¤±è´¥"),1),s("div",He,l(h.value?.message),1),!h.value?.success&&h.value?.backlash?(t(),o("div",Be,[a(e(Ps),{size:16}),s("span",null,"é­å—åå™¬ï¼ŒæŸå¤± "+l(h.value.backlash.hpLost)+" ç”Ÿå‘½å€¼",1)])):N("",!0),s("button",{class:"result-btn",onClick:v[1]||(v[1]=g=>C.value=!1)},"ç¡®å®š")],2)])):N("",!0)]))]))}}),Ee=rs(Ne,[["__scopeId","data-v-8198326d"]]),Ae={class:"consort-theft-panel"},Ie={key:0,class:"stolen-section"},Fe={class:"stolen-card"},Le={class:"stolen-header"},De={class:"expires-badge"},Ue={class:"consort-info"},Ve={class:"consort-avatar"},Ge={class:"consort-details"},je={class:"consort-name"},qe={class:"consort-origin"},Ke={class:"owner-name"},Ze={class:"action-buttons"},Oe={class:"action-card"},Xe={class:"action-header"},Je={class:"action-count"},Qe=["disabled"],We={class:"action-card"},Ye={class:"action-header"},st={class:"action-count"},et=["disabled"],tt={key:0,class:"buff-card"},at={class:"buff-header"},nt={class:"buff-content"},ot={class:"buff-item"},lt={class:"buff-item"},it={class:"buff-expires"},rt={key:1,class:"steal-section"},ut={class:"section-intro"},ct={key:0,class:"cooldown-card"},dt={class:"cooldown-text"},vt={class:"cooldown-time"},ht={key:1,class:"realm-warning"},pt={class:"section-title"},ft={class:"search-area"},_t=["disabled"],mt={key:0,class:"loading-state"},yt={key:1,class:"empty-state"},gt={key:2,class:"target-list"},$t={class:"target-info"},bt={class:"target-avatar"},wt={class:"target-details"},Ct={class:"target-name"},kt={class:"target-realm"},zt=["disabled","onClick"],St={class:"result-title"},xt={class:"result-message"},Mt=os({__name:"ConsortTheftPanel",setup(p){const i=us(),{stolenConsort:d,consortTheft:E,extractBuff:T,loading:z}=ls(i),y=m(!1),b=m(!1),S=m([]),C=m(!1),h=m("success"),w=m(""),P=m(""),f=m(U(vs)),u=m(0),_=m(0),B=m(0);let D=null;const J=ts(()=>i.canBrainwash),Q=ts(()=>i.canExtract);function R($){const r=Math.floor($/36e5),M=Math.floor($%36e5/6e4);return r>0?`${r}æ—¶${M}åˆ†åå½’è¿˜`:`${M}åˆ†åå½’è¿˜`}function v($){const r=Math.floor($/36e5),M=Math.floor($%36e5/6e4),cs=Math.floor($%6e4/1e3);return r>0?`${r}æ—¶${M}åˆ†${cs}ç§’`:M>0?`${M}åˆ†${cs}ç§’`:`${cs}ç§’`}function g($){const r=Math.floor($/6e4),M=Math.floor($%6e4/1e3);return`${r}åˆ†${M}ç§’`}function A(){const $=Date.now();d.value?u.value=Math.max(0,d.value.remainingMs-($-i.lastRefresh)):u.value=0,E.value?.cooldownMs?_.value=Math.max(0,E.value.cooldownMs-($-i.lastRefresh)):_.value=0,T.value?.active&&T.value.expiresAt?B.value=Math.max(0,T.value.expiresAt-$):B.value=0}async function k(){y.value=!0,b.value=!0;try{await i.fetchPvpTargets(30),S.value=i.pvpTargets.filter($=>$.sectId==="starpalace")}finally{y.value=!1}}async function n($,r){try{const M=await i.stealConsort($);h.value="success",f.value=U(vs),w.value="çªƒå–æˆåŠŸ",P.value=`æˆåŠŸçªƒå– ${r} çš„ä¾å¦¾ ${M.consortName}`,C.value=!0,A()}catch(M){h.value="error",f.value=U(Y),w.value="çªƒå–å¤±è´¥",P.value=M instanceof Error?M.message:"çªƒå–å¤±è´¥",C.value=!0}}async function c(){try{const $=await i.brainwash();h.value="success",f.value=U(O),w.value="é­”éŸ³çŒè„‘",P.value=`è·å¾— ${$.cultivationGain} ä¿®ä¸ºï¼Œå‰©ä½™ ${$.remainingCount} æ¬¡`,C.value=!0}catch($){h.value="error",f.value=U(Y),w.value="æ“ä½œå¤±è´¥",P.value=$ instanceof Error?$.message:"æ“ä½œå¤±è´¥",C.value=!0}}async function x(){try{const $=await i.extract();h.value="success",f.value=U(ns),w.value="å¼ºç´¢å…ƒé˜´",P.value=`è·å¾—æ”»å‡»+${$.bonus.attack}ã€é˜²å¾¡+${$.bonus.defense}ï¼Œå‰©ä½™ ${$.remainingCount} æ¬¡`,C.value=!0,A()}catch($){h.value="error",f.value=U(Y),w.value="æ“ä½œå¤±è´¥",P.value=$ instanceof Error?$.message:"æ“ä½œå¤±è´¥",C.value=!0}}return is(async()=>{await i.fetchStolenConsort(),A(),D=setInterval(A,1e3)}),Cs(()=>{D&&clearInterval(D)}),($,r)=>(t(),o("div",Ae,[e(d)?(t(),o("div",Ie,[s("div",Fe,[s("div",Le,[a(e(ds),{size:20}),r[3]||(r[3]=s("span",null,"çªƒå–çš„ä¾å¦¾",-1)),s("div",De,[a(e(ss),{size:14}),s("span",null,l(R(u.value)),1)])]),s("div",Ue,[s("div",Ve,[a(e(Z),{size:24})]),s("div",Ge,[s("div",je,l(e(d).consortName),1),s("div",qe,[r[4]||(r[4]=s("span",null,"åŸä¸»:",-1)),s("span",Ke,l(e(d).originalOwnerName),1)])])]),s("div",Ze,[s("div",Oe,[s("div",Xe,[a(e(Xs),{size:18}),r[5]||(r[5]=s("span",null,"é­”éŸ³çŒè„‘",-1))]),r[7]||(r[7]=s("div",{class:"action-desc"},"æ¶ˆè€—ä¾å¦¾ç²¾ç¥ï¼Œè·å¾—ä¿®ä¸º",-1)),s("div",Je,l(e(d).brainwashCount)+"/"+l(e(d).brainwashMaxCount),1),s("button",{class:"action-btn brainwash",disabled:!J.value||e(z),onClick:c},[a(e(O),{size:16}),r[6]||(r[6]=I(" çŒè„‘ (+200ä¿®ä¸º) ",-1))],8,Qe)]),s("div",We,[s("div",Ye,[a(e(ns),{size:18}),r[8]||(r[8]=s("span",null,"å¼ºç´¢å…ƒé˜´",-1))]),r[10]||(r[10]=s("div",{class:"action-desc"},"æ±²å–ç²¾å…ƒï¼Œå¢å¼ºæˆ˜åŠ›",-1)),s("div",st,l(e(d).extractCount)+"/"+l(e(d).extractMaxCount),1),s("button",{class:"action-btn extract",disabled:!Q.value||e(z),onClick:x},[a(e(ps),{size:16}),r[9]||(r[9]=I(" å¼ºç´¢ (+5æ”»/+3é˜²) ",-1))],8,et)])])]),e(T)?.active?(t(),o("div",tt,[s("div",at,[a(e(Zs),{size:18}),r[11]||(r[11]=s("span",null,"å…ƒé˜´åŠ æŒ",-1))]),s("div",nt,[s("div",ot,[a(e(fs),{size:16}),s("span",null,"æ”»å‡» +"+l(e(T).bonus?.attack||0),1)]),s("div",lt,[a(e(ps),{size:16}),s("span",null,"é˜²å¾¡ +"+l(e(T).bonus?.defense||0),1)]),s("div",it,[a(e(ss),{size:14}),s("span",null,"å‰©ä½™: "+l(g(B.value)),1)])])])):N("",!0)])):(t(),o("div",rt,[s("div",ut,[a(e(ds),{size:32,class:"intro-icon"}),r[12]||(r[12]=s("h3",null,"é­”æŸ“çº¢å°˜",-1)),r[13]||(r[13]=s("p",null,"çªƒå–æ˜Ÿå®«å¼Ÿå­çš„ä¾å¦¾ï¼Œè¡Œé­”é“ä¹‹äº‹",-1))]),_.value>0?(t(),o("div",ct,[a(e(ss),{size:24}),s("div",dt,[r[14]||(r[14]=s("span",null,"çªƒå–å†·å´ä¸­",-1)),s("span",vt,l(v(_.value)),1)])])):e(E)?.canUse?(t(),o(L,{key:2},[s("div",pt,[a(e(_s),{size:18}),r[16]||(r[16]=s("span",null,"å¯»æ‰¾æ˜Ÿå®«å¼Ÿå­",-1))]),s("div",ft,[s("button",{class:"refresh-btn",onClick:k,disabled:y.value},[a(e(ms),{size:18,class:V({spin:y.value})},null,8,["class"]),r[17]||(r[17]=I(" åˆ·æ–°ç›®æ ‡ ",-1))],8,_t)]),y.value?(t(),o("div",mt,[a(e(j),{size:24,class:"spin"}),r[18]||(r[18]=s("span",null,"æœç´¢æ˜Ÿå®«å¼Ÿå­...",-1))])):S.value.length===0&&b.value?(t(),o("div",yt,[a(e(ys),{size:32}),r[19]||(r[19]=s("span",null,"æš‚æ— å¯çªƒå–çš„æ˜Ÿå®«å¼Ÿå­",-1))])):S.value.length>0?(t(),o("div",gt,[(t(!0),o(L,null,G(S.value,M=>(t(),o("div",{key:M.id,class:"target-card"},[s("div",$t,[s("div",bt,[a(e(Ds),{size:18})]),s("div",wt,[s("div",Ct,l(M.name),1),s("div",kt,l(M.realmName),1)])]),s("button",{class:"steal-btn",disabled:e(z),onClick:cs=>n(M.id,M.name)},[a(e(ds),{size:16}),r[20]||(r[20]=I(" çªƒå– ",-1))],8,zt)]))),128))])):N("",!0)],64)):(t(),o("div",ht,[a(e(Bs),{size:24}),r[15]||(r[15]=s("span",null,"éœ€è¾¾åˆ°ç»“ä¸¹æœŸæ‰èƒ½ä½¿ç”¨é­”æŸ“çº¢å°˜",-1))]))])),(t(),H(K,{to:"body"},[C.value?(t(),o("div",{key:0,class:"result-modal-overlay",onClick:r[2]||(r[2]=M=>C.value=!1)},[s("div",{class:"result-modal",onClick:r[1]||(r[1]=as(()=>{},["stop"]))},[s("div",{class:V(["result-icon",h.value])},[(t(),H(xs(f.value),{size:48}))],2),s("div",St,l(w.value),1),s("div",xt,l(P.value),1),s("button",{class:"result-btn",onClick:r[0]||(r[0]=M=>C.value=!1)},"ç¡®å®š")])])):N("",!0)]))]))}}),Tt=rs(Mt,[["__scopeId","data-v-197ebe02"]]),Pt={class:"sha-energy-panel"},Rt={key:0,class:"initial-loading"},Ht={class:"sha-card"},Bt={class:"sha-header"},Nt={class:"sha-display"},Et={class:"sha-ring"},At={viewBox:"0 0 100 100"},It=["stroke-dasharray"],Ft={class:"sha-center"},Lt={class:"sha-number"},Dt={class:"sha-info"},Ut={class:"info-row"},Vt={class:"value"},Gt={class:"info-row"},jt={class:"value bonus"},qt={class:"info-row"},Kt={class:"value decay"},Zt={class:"sha-tips"},Ot={class:"tip-item"},Xt={class:"tip-item"},Jt={class:"pvp-section"},Qt={class:"section-header"},Wt={class:"pvp-count"},Yt={class:"pvp-actions"},sa=["disabled"],ea={key:0,class:"loading-state"},ta={key:1,class:"empty-state"},aa={key:2,class:"target-list"},na={class:"target-avatar"},oa={class:"target-info"},la={class:"target-name"},ia={class:"target-details"},ra={class:"realm"},ua={key:0,class:"sect"},ca={class:"target-power"},da=["disabled","onClick"],va={class:"history-header"},ha={key:0,class:"history-loading"},pa={key:1,class:"history-empty"},fa={key:2,class:"history-list"},_a={class:"history-result"},ma={class:"history-info"},ya={class:"opponent-name"},ga={class:"history-details"},$a={class:"history-time"},ba={key:0,class:"battle-animation-overlay"},wa={class:"battle-animation-modal"},Ca={class:"battle-fighters"},ka={class:"fighter-box you"},za={class:"battle-clash"},Sa={class:"fighter-box enemy"},xa={class:"battle-log"},Ma={class:"battle-loading"},Ta={class:"battle-animation"},Pa={class:"versus"},Ra={class:"fighter you"},Ha={class:"power"},Ba={class:"fighter enemy"},Na={class:"power"},Ea={class:"result-badge"},Aa={class:"result-text"},Ia={class:"result-rewards"},Fa={key:0,class:"reward-item gain"},La=os({__name:"ShaEnergyPanel",setup(p){const i=us(),{shaEnergy:d,pvpStatus:E,pvpTargets:T,pvpHistory:z}=ls(i),y=m(!0),b=m(!1),S=m(!1),C=m(!1),h=m(!1),w=m(!1),P=m(!1),f=m(null),u=m(""),_=m([]),B=ts(()=>d.value?d.value.current/d.value.max*100:0),D=ts(()=>w.value?!1:i.canPvpChallenge);function J(k){const n=new Date(k),x=new Date().getTime()-n.getTime();return x<6e4?"åˆšåˆš":x<36e5?`${Math.floor(x/6e4)}åˆ†é’Ÿå‰`:x<864e5?`${Math.floor(x/36e5)}å°æ—¶å‰`:`${Math.floor(x/864e5)}å¤©å‰`}function Q(k){switch(k){case"challenger_win":return"æŒ‘æˆ˜æˆåŠŸ!";case"defender_win":return"æŒ‘æˆ˜å¤±è´¥";case"draw":return"åŠ¿å‡åŠ›æ•Œ";default:return""}}async function R(){b.value=!0;try{await i.fetchPvpTargets(10)}finally{b.value=!1}}function v(k,n){const c=[];c.push(`âš”ï¸ å‘ ${n} å‘èµ·æŒ‘æˆ˜ï¼`),c.push(`ğŸ“Š ä½ çš„æˆ˜åŠ›: ${k.challengerPower}`),c.push(`ğŸ“Š å¯¹æ‰‹æˆ˜åŠ›: ${k.defenderPower}`);const x=k.challengerPower-k.defenderPower;return x>100?c.push("ğŸ’ª ä½ å æ®ç»å¯¹ä¼˜åŠ¿ï¼"):x>0?c.push("âš¡ ä½ ç•¥å ä¸Šé£..."):x<-100?c.push("ğŸ˜° å¯¹æ‰‹å®åŠ›è¿œè¶…äºä½ ..."):x<0?c.push("ğŸ¤” å¯¹æ‰‹ç•¥èƒœä¸€ç­¹..."):c.push("âš–ï¸ åŒæ–¹åŠ¿å‡åŠ›æ•Œï¼"),k.result==="challenger_win"?(c.push("ğŸ‰ ä½ è·å¾—äº†èƒœåˆ©ï¼"),k.rewards.cultivationChange>0&&c.push(`âœ¨ è·å¾—ä¿®ä¸º +${k.rewards.cultivationChange}`),k.rewards.shaEnergyGain>0&&c.push(`ğŸ”¥ è·å¾—ç…æ°” +${k.rewards.shaEnergyGain}`)):k.result==="defender_win"?(c.push("ğŸ’” ä½ è´¥ä¸‹é˜µæ¥..."),k.rewards.cultivationChange<0&&c.push(`ğŸ“‰ æŸå¤±ä¿®ä¸º ${k.rewards.cultivationChange}`)):c.push("ğŸ¤ åŒæ–¹ä¸åˆ†èƒœè´Ÿ"),c}async function g(k,n){if(!(!D.value||w.value)){w.value=!0,u.value=n,_.value=[],P.value=!0;try{_.value.push(`âš”ï¸ å‘ ${n} å‘èµ·æŒ‘æˆ˜ï¼`),await new Promise(x=>setTimeout(x,500)),_.value.push("ğŸŒ€ æˆ˜æ–—è¿›è¡Œä¸­...");const c=await i.pvpChallenge(k);f.value=c,_.value=v(c,n),await new Promise(x=>setTimeout(x,800)),P.value=!1,h.value=!0,i.$patch({pvpHistory:[]})}catch(c){console.error("æŒ‘æˆ˜å¤±è´¥:",c),_.value.push("âŒ æŒ‘æˆ˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"),P.value=!1}finally{w.value=!1}}}async function A(k=!1){if(!(!k&&z.value.length>0)){S.value=!0;try{await i.fetchPvpHistory(20)}finally{S.value=!1}}}return is(async()=>{try{await i.fetchPvpStatus(),await R()}catch(k){console.error("åˆå§‹åŒ–ç…æ°”æ·¬ä½“å¤±è´¥:",k)}finally{y.value=!1}}),As(C,async k=>{k&&await A(!0)}),(k,n)=>(t(),o("div",Pt,[y.value?(t(),o("div",Rt,[a(e(j),{size:32,class:"spin"}),n[7]||(n[7]=s("span",null,"æ­£åœ¨åŠ è½½ç…æ°”çŠ¶æ€...",-1))])):(t(),o(L,{key:1},[s("div",Ht,[s("div",Bt,[a(e(ns),{size:20}),n[8]||(n[8]=s("span",null,"ç…æ°”æ·¬ä½“",-1))]),s("div",Nt,[s("div",Et,[(t(),o("svg",At,[n[9]||(n[9]=s("circle",{class:"ring-bg",cx:"50",cy:"50",r:"42"},null,-1)),s("circle",{class:"ring-progress",cx:"50",cy:"50",r:"42","stroke-dasharray":`${B.value*2.64} 264`},null,8,It)])),s("div",Ft,[a(e(O),{size:24}),s("span",Lt,l(e(d)?.current||0),1)])]),s("div",Dt,[s("div",Ut,[n[10]||(n[10]=s("span",{class:"label"},"å½“å‰ç…æ°”",-1)),s("span",Vt,l(e(d)?.current||0)+"/"+l(e(d)?.max||100),1)]),s("div",Gt,[n[11]||(n[11]=s("span",{class:"label"},"æˆ˜åŠ›åŠ æˆ",-1)),s("span",jt,"+"+l((e(d)?.bonusPercent||0).toFixed(1))+"%",1)]),s("div",qt,[n[12]||(n[12]=s("span",{class:"label"},"æ¯æ—¥è¡°å‡",-1)),s("span",Kt,"-"+l(e(d)?.decayAmount||5),1)])])]),s("div",Zt,[s("div",Ot,[a(e(es),{size:14}),n[13]||(n[13]=s("span",null,"å‡»è´¥æ•Œäººè·å¾—ç…æ°”",-1))]),s("div",Xt,[a(e(Us),{size:14}),n[14]||(n[14]=s("span",null,"æ¯ç‚¹ç…æ°”+0.5%æˆ˜åŠ›",-1))])])]),s("div",Jt,[s("div",Qt,[a(e(fs),{size:20}),n[15]||(n[15]=s("span",null,"åˆ‡ç£‹æŒ‘æˆ˜",-1)),s("div",Wt,"ä»Šæ—¥: "+l(e(E)?.dailyChallenges||0)+"/"+l(e(E)?.maxChallenges||5),1)]),s("div",Yt,[s("button",{class:"refresh-btn",onClick:R,disabled:b.value},[a(e(ms),{size:16,class:V({spin:b.value})},null,8,["class"]),n[16]||(n[16]=I(" åˆ·æ–°å¯¹æ‰‹ ",-1))],8,sa),s("button",{class:"history-btn",onClick:n[0]||(n[0]=c=>C.value=!0)},[a(e(gs),{size:16}),n[17]||(n[17]=I(" æˆ˜æ–—è®°å½• ",-1))])]),b.value?(t(),o("div",ea,[a(e(j),{size:24,class:"spin"}),n[18]||(n[18]=s("span",null,"æœç´¢å¯¹æ‰‹ä¸­...",-1))])):e(T).length===0?(t(),o("div",ta,[a(e(ys),{size:32}),n[19]||(n[19]=s("span",null,"æš‚æ— å¯æŒ‘æˆ˜çš„å¯¹æ‰‹",-1)),n[20]||(n[20]=s("span",{class:"hint"},"ç‚¹å‡»åˆ·æ–°å¯¹æ‰‹å¯»æ‰¾ç›®æ ‡",-1))])):(t(),o("div",aa,[(t(!0),o(L,null,G(e(T),c=>(t(),o("div",{key:c.id,class:"target-card"},[s("div",na,[a(e(q),{size:20})]),s("div",oa,[s("div",la,l(c.name),1),s("div",ia,[s("span",ra,l(c.realmName),1),c.sectName?(t(),o("span",ua,l(c.sectName),1)):N("",!0)])]),s("div",ca,[a(e(es),{size:14}),s("span",null,l(c.power),1)]),s("button",{class:"challenge-btn",disabled:!D.value||w.value,onClick:x=>g(c.id,c.name)},[a(e(fs),{size:14}),n[21]||(n[21]=I(" æŒ‘æˆ˜ ",-1))],8,da)]))),128))]))])],64)),(t(),H(K,{to:"body"},[C.value?(t(),o("div",{key:0,class:"history-modal-overlay",onClick:n[3]||(n[3]=c=>C.value=!1)},[s("div",{class:"history-modal",onClick:n[2]||(n[2]=as(()=>{},["stop"]))},[s("div",va,[a(e(gs),{size:20}),n[22]||(n[22]=s("span",null,"æˆ˜æ–—è®°å½•",-1)),s("button",{class:"close-btn",onClick:n[1]||(n[1]=c=>C.value=!1)},[a(e(Vs),{size:20})])]),S.value?(t(),o("div",ha,[a(e(j),{size:24,class:"spin"}),n[23]||(n[23]=s("span",null,"åŠ è½½ä¸­...",-1))])):e(z).length===0?(t(),o("div",pa,[a(e(Ks),{size:32}),n[24]||(n[24]=s("span",null,"æš‚æ— æˆ˜æ–—è®°å½•",-1))])):(t(),o("div",fa,[(t(!0),o(L,null,G(e(z),c=>(t(),o("div",{key:c.id,class:V(["history-item",c.result])},[s("div",_a,[c.result==="win"?(t(),H(e($s),{key:0,size:18})):c.result==="lose"?(t(),H(e(bs),{key:1,size:18})):(t(),H(e(ws),{key:2,size:18}))]),s("div",ma,[s("div",ya,l(c.isChallenger?"æŒ‘æˆ˜":"è¢«æŒ‘æˆ˜")+" "+l(c.opponentName),1),s("div",ga,[s("span",{class:V(c.cultivationChange>=0?"gain":"loss")}," ä¿®ä¸º "+l(c.cultivationChange>=0?"+":"")+l(c.cultivationChange),3)])]),s("div",$a,l(J(c.createdAt)),1)],2))),128))]))])])):N("",!0)])),(t(),H(K,{to:"body"},[P.value?(t(),o("div",ba,[s("div",wa,[s("div",Ca,[s("div",ka,[a(e(q),{size:40}),n[25]||(n[25]=s("span",null,"ä½ ",-1))]),s("div",za,[a(e(es),{size:32,class:"clash-icon"})]),s("div",Sa,[a(e(q),{size:40}),s("span",null,l(u.value),1)])]),s("div",xa,[(t(!0),o(L,null,G(_.value,(c,x)=>(t(),o("div",{key:x,class:"log-item",style:Ms({animationDelay:`${x*.3}s`})},l(c),5))),128))]),s("div",Ma,[a(e(j),{size:24,class:"spin"}),n[26]||(n[26]=s("span",null,"æˆ˜æ–—ä¸­...",-1))])])])):N("",!0)])),(t(),H(K,{to:"body"},[h.value?(t(),o("div",{key:0,class:"result-modal-overlay",onClick:n[6]||(n[6]=c=>h.value=!1)},[s("div",{class:V(["result-modal",f.value?.result]),onClick:n[5]||(n[5]=as(()=>{},["stop"]))},[s("div",Ta,[s("div",Pa,[s("div",Ra,[a(e(q),{size:32}),n[27]||(n[27]=s("span",null,"ä½ ",-1)),s("span",Ha,l(f.value?.challengerPower),1)]),n[28]||(n[28]=s("div",{class:"vs-icon"},"VS",-1)),s("div",Ba,[a(e(q),{size:32}),s("span",null,l(u.value),1),s("span",Na,l(f.value?.defenderPower),1)])])]),s("div",Ea,[f.value?.result==="challenger_win"?(t(),H(e($s),{key:0,size:40})):f.value?.result==="defender_win"?(t(),H(e(bs),{key:1,size:40})):(t(),H(e(ws),{key:2,size:40}))]),s("div",Aa,l(Q(f.value?.result)),1),s("div",Ia,[s("div",{class:V(["reward-item",(f.value?.rewards?.cultivationChange??0)>=0?"gain":"loss"])},[a(e(Z),{size:16}),s("span",null," ä¿®ä¸º "+l((f.value?.rewards?.cultivationChange??0)>=0?"+":"")+l(f.value?.rewards?.cultivationChange??0),1)],2),(f.value?.rewards?.shaEnergyGain??0)>0?(t(),o("div",Fa,[a(e(ns),{size:16}),s("span",null,"ç…æ°” +"+l(f.value?.rewards?.shaEnergyGain),1)])):N("",!0)]),s("button",{class:"result-btn",onClick:n[4]||(n[4]=c=>h.value=!1)},"ç¡®å®š")],2)])):N("",!0)]))]))}}),Da=rs(La,[["__scopeId","data-v-e64430fd"]]),Ua={class:"curse-panel"},Va={key:0,class:"cursed-status"},Ga={class:"cursed-header"},ja={class:"cursed-info"},qa={class:"cursed-item"},Ka={class:"value"},Za={class:"cursed-item"},Oa={class:"value warning"},Xa={class:"cursed-item"},Ja={class:"value danger"},Qa={class:"cursed-effects"},Wa=["disabled"],Ya={class:"section-title"},sn={key:1,class:"empty-state"},en={key:2,class:"curse-list"},tn={class:"curse-target"},an={class:"target-avatar"},nn={class:"target-info"},on={class:"target-name"},ln={class:"target-time"},rn={class:"curse-stored"},un=["onClick","disabled"],cn={class:"section-title"},dn={class:"target-search"},vn={class:"search-box"},hn=["disabled"],pn={class:"result-icon"},fn={class:"result-title"},_n={class:"result-message"},mn={key:0,class:"bonus-info"},yn=os({__name:"CursePanel",setup(p){const i=us(),{curseStatus:d,castRecords:E,loading:T}=ls(i),z=m(""),y=m(!1),b=m(null),S=m("");function C(f){if(f<=0)return"å·²ç»“æŸ";const u=Math.floor(f/(3600*1e3)),_=Math.floor(f%(3600*1e3)/(60*1e3));return u>0?`${u}å°æ—¶${_}åˆ†é’Ÿ`:`${_}åˆ†é’Ÿ`}async function h(){if(z.value.trim())try{const _=(await W.getTargets(50)).data.find(D=>D.name===z.value.trim());if(!_){b.value={success:!1,message:"æœªæ‰¾åˆ°è¯¥ç›®æ ‡ï¼Œè¯·ç¡®è®¤é“å·æ˜¯å¦æ­£ç¡®"},S.value="æ–½å’’å¤±è´¥",y.value=!0;return}const B=await i.castCurse(_.id);b.value=B,S.value=B.success?"æ–½å’’æˆåŠŸ":"æ–½å’’å¤±è´¥",y.value=!0,B.success&&(z.value="")}catch(f){const u=f;b.value={success:!1,message:u.message||"æ–½å’’å¤±è´¥"},S.value="æ–½å’’å¤±è´¥",y.value=!0}}async function w(f,u){try{const _=await i.harvestCurse(f);b.value=_,S.value=_.success?"æ”¶å‰²æˆåŠŸ":"æ”¶å‰²å¤±è´¥",y.value=!0}catch(_){const B=_;b.value={success:!1,message:B.message||"æ”¶å‰²å¤±è´¥"},S.value="æ”¶å‰²å¤±è´¥",y.value=!0}}async function P(){try{const f=await i.removeCurse();b.value={success:f.success,message:f.message},S.value=f.success?"è§£å’’æˆåŠŸ":"è§£å’’å¤±è´¥",y.value=!0}catch(f){const u=f;b.value={success:!1,message:u.message||"è§£å’’å¤±è´¥"},S.value="è§£å’’å¤±è´¥",y.value=!0}}return is(async()=>{await i.fetchCurseStatus()}),(f,u)=>(t(),o("div",Ua,[e(d)?.isCursed?(t(),o("div",Va,[s("div",Ga,[a(e(Z),{size:20,class:"curse-icon"}),u[4]||(u[4]=s("span",null,"ä½ æ­£è¢«ä¸¹é­”ä¹‹å’’ä¾µèš€",-1))]),s("div",ja,[s("div",qa,[u[5]||(u[5]=s("span",{class:"label"},"æ–½å’’è€…",-1)),s("span",Ka,l(e(d).casterName||"æœªçŸ¥"),1)]),s("div",Za,[u[6]||(u[6]=s("span",{class:"label"},"å‰©ä½™æ—¶é—´",-1)),s("span",Oa,l(C(e(d).remainingMs||0)),1)]),s("div",Xa,[u[7]||(u[7]=s("span",{class:"label"},"å·²è¢«å¸å–",-1)),s("span",Ja,l(e(d).storedCultivation||0)+" ä¿®ä¸º",1)])]),s("div",Qa,[a(e(Ps),{size:14}),u[8]||(u[8]=s("span",null,"å’’å°æ•ˆæœï¼šç‚¼ä¸¹æˆåŠŸç‡ -10%ï¼Œæ¯10åˆ†é’Ÿè¢«å¸å–100-200ä¿®ä¸º",-1))]),s("button",{class:"remove-curse-btn",onClick:P,disabled:e(T)},[a(e(ps),{size:16}),u[9]||(u[9]=I(" ä½¿ç”¨ä¹è½¬è§£å„ä¸¹è§£å’’ ",-1))],8,Wa)])):N("",!0),s("div",Ya,[a(e(Ts),{size:18}),u[10]||(u[10]=s("span",null,"æˆ‘çš„å’’å°",-1))]),e(E).length===0?(t(),o("div",sn,[a(e(Z),{size:32}),u[11]||(u[11]=s("span",null,"æš‚æ— æ–½å’’è®°å½•",-1))])):(t(),o("div",en,[(t(!0),o(L,null,G(e(E),_=>(t(),o("div",{key:_.targetId,class:"curse-card"},[s("div",tn,[s("div",an,[a(e(q),{size:18})]),s("div",nn,[s("div",on,l(_.targetName),1),s("div",ln,[a(e(ss),{size:12}),s("span",null,"å‰©ä½™: "+l(C(_.remainingMs)),1)])])]),s("div",rn,[a(e(O),{size:14}),s("span",null,l(_.storedCultivation)+" ä¿®ä¸º",1)]),s("button",{class:"harvest-btn",onClick:B=>w(_.targetId,_.targetName),disabled:e(T)},[a(e(qs),{size:16}),u[12]||(u[12]=I(" æ”¶å‰² ",-1))],8,un)]))),128))])),s("div",cn,[a(e(Hs),{size:18}),u[13]||(u[13]=s("span",null,"æ–½æ”¾å’’æœ¯",-1))]),u[15]||(u[15]=Is('<div class="cast-info" data-v-fc23f1bc><div class="cast-cost" data-v-fc23f1bc><span class="label" data-v-fc23f1bc>æ¶ˆè€—ï¼š</span><span class="value" data-v-fc23f1bc>ä¸¹é­”å¿ƒèƒ x1 + 500ä¿®ä¸º</span></div><div class="cast-effect" data-v-fc23f1bc><span class="label" data-v-fc23f1bc>æ•ˆæœï¼š</span><span class="value" data-v-fc23f1bc>å¯¹ç›®æ ‡ç§ä¸‹å’’å°ï¼ŒæŒç»­12å°æ—¶ï¼Œæ¯10åˆ†é’Ÿå¸å–100-200ä¿®ä¸º</span></div></div>',1)),s("div",dn,[s("div",vn,[a(e(_s),{size:18}),ks(s("input",{"onUpdate:modelValue":u[0]||(u[0]=_=>z.value=_),placeholder:"è¾“å…¥ç›®æ ‡é“å·...",onKeyup:Ss(h,["enter"])},null,544),[[zs,z.value]])]),s("button",{class:"cast-btn",onClick:h,disabled:e(T)||!z.value.trim()},[a(e(Z),{size:16}),u[14]||(u[14]=I(" æ–½å’’ ",-1))],8,hn)]),(t(),H(K,{to:"body"},[y.value?(t(),o("div",{key:0,class:"result-modal-overlay",onClick:u[3]||(u[3]=_=>y.value=!1)},[s("div",{class:V(["result-modal",{success:b.value?.success,failure:!b.value?.success}]),onClick:u[2]||(u[2]=as(()=>{},["stop"]))},[s("div",pn,[b.value?.success?(t(),H(e(vs),{key:0,size:48})):(t(),H(e(Y),{key:1,size:48}))]),s("div",fn,l(S.value),1),s("div",_n,l(b.value?.message),1),b.value?.cultivationGained?(t(),o("div",mn,[a(e(O),{size:16}),s("span",null,"è·å¾— "+l(b.value.cultivationGained)+" ä¿®ä¸º",1)])):N("",!0),s("button",{class:"result-btn",onClick:u[1]||(u[1]=_=>y.value=!1)},"ç¡®å®š")],2)])):N("",!0)]))]))}}),gn=rs(yn,[["__scopeId","data-v-fc23f1bc"]]),$n={class:"heisha-arts"},bn={class:"sha-particles"},wn={class:"page-header"},Cn={class:"header-icon"},kn={key:0,class:"loading-container"},zn={key:1,class:"not-member"},Sn={class:"banner-icon"},xn={class:"sha-status-bar"},Mn={class:"sha-info"},Tn={class:"sha-value"},Pn={class:"sha-bonus"},Rn={class:"tab-container"},Hn=["onClick"],Bn={key:0,class:"tab-content"},Nn={key:1,class:"tab-content"},En={key:2,class:"tab-content"},An={key:3,class:"tab-content"},In=os({__name:"HeishaArts",setup(p){const i=Fs(),d=us(),{loading:E,isMember:T,shaEnergy:z}=ls(d),y=m("seize");function b(){i.push("/blood-soul-banner")}const S=[{id:"seize",name:"å¤ºèˆé­”åŠŸ",icon:U(hs)},{id:"theft",name:"é­”æŸ“çº¢å°˜",icon:U(ds)},{id:"sha",name:"ç…æ°”æ·¬ä½“",icon:U(O)},{id:"curse",name:"ä¸¹é­”ä¹‹å’’",icon:U(Z)}];return is(async()=>{try{await d.fetchStatus(!0)}catch(C){console.error("åˆå§‹åŒ–é­”é“ç¦æœ¯ç³»ç»Ÿå¤±è´¥:",C)}}),(C,h)=>(t(),o("div",$n,[s("div",bn,[(t(),o(L,null,G(25,w=>s("div",{key:w,class:"sha-particle",style:Ms({"--delay":Math.random()*5+"s","--x":Math.random()*100+"%","--y":Math.random()*100+"%","--size":Math.random()*4+2+"px","--duration":Math.random()*3+2+"s"})},null,4)),64))]),s("div",wn,[s("div",Cn,[h[0]||(h[0]=s("div",{class:"header-icon-glow"},null,-1)),h[1]||(h[1]=s("div",{class:"header-icon-ring"},null,-1)),a(e(Rs),{size:24})]),h[2]||(h[2]=s("div",{class:"header-text"},[s("h1",null,"é­”é“ç¦æœ¯"),s("p",null,"ä»¥åŠ›è¯é“ï¼Œè¡€æŸ“è‹ç©¹")],-1))]),e(E)?(t(),o("div",kn,[a(e(j),{size:32,class:"spin"}),h[3]||(h[3]=s("span",null,"æ­£åœ¨å‡èšç…æ°”...",-1))])):e(T)?(t(),o(L,{key:2},[s("div",{class:"blood-banner-entry",onClick:b},[s("div",Sn,[a(e(Gs),{size:24})]),h[6]||(h[6]=s("div",{class:"banner-info"},[s("h3",null,"è¡€é­‚å¹¡"),s("p",null,"æœ¬å‘½é­”å® Â· ç‚¼åŒ–é­‚é­„")],-1)),a(e(js),{size:20,class:"banner-arrow"})]),s("div",xn,[s("div",Mn,[a(e(ns),{size:18}),h[7]||(h[7]=s("span",{class:"sha-label"},"ç…æ°”",-1)),s("span",Tn,l(e(z)?.current||0)+"/"+l(e(z)?.max||100),1)]),s("div",Pn,[a(e(es),{size:16}),s("span",null,"æˆ˜åŠ›åŠ æˆ: +"+l((e(z)?.bonusPercent||0).toFixed(1))+"%",1)])]),s("div",Rn,[(t(),o(L,null,G(S,w=>s("div",{key:w.id,class:V(["tab-item",{active:y.value===w.id}]),onClick:P=>y.value=w.id},[(t(),H(xs(w.icon),{size:18})),s("span",null,l(w.name),1)],10,Hn)),64))]),y.value==="seize"?(t(),o("div",Bn,[a(Ee)])):y.value==="theft"?(t(),o("div",Nn,[a(Tt)])):y.value==="sha"?(t(),o("div",En,[a(Da)])):y.value==="curse"?(t(),o("div",An,[a(gn)])):N("",!0)],64)):(t(),o("div",zn,[a(e(Bs),{size:48}),h[4]||(h[4]=s("h2",null,"æ— æ³•ä¿®ä¹ ",-1)),h[5]||(h[5]=s("p",null,"åªæœ‰é»‘ç…æ•™å¼Ÿå­æ‰èƒ½ä¿®ä¹ é­”é“ç¦æœ¯",-1))]))]))}}),yo=rs(In,[["__scopeId","data-v-60679d22"]]);export{yo as default};
