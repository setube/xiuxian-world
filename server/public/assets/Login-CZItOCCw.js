import{e as x,u as y,f,c as k,a as i,d as o,w as t,g as p,h,B as z,o as B,i as L,j as v,k as b}from"./index-DA11XDlS.js";import{u as C}from"./use-message--i6DiThE.js";import{_ as U,a as N}from"./FormItem-BZYp5uQa.js";import{_ as V}from"./Input-DOOhwlQ-.js";import{U as E}from"./user-CXIJJnqr.js";import{L as I}from"./lock-CWZIQcVF.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-length-B-p6aW7q.js";import"./get-DlSqnTrT.js";import"./use-locale-EBm6emhn.js";import"./use-merged-state-DvdMjKiF.js";import"./createLucideIcon-DiiZaxVK.js";const M={class:"login-form"},R={class:"form-footer"},S=x({__name:"Login",setup(j){const n=h(),g=y(),s=f({username:"",password:""}),l=f(!1),u=C(),m=async()=>{if(!s.value.username||!s.value.password){u.warning("请填写用户名和密码");return}l.value=!0;try{const a=await g.login(s.value.username,s.value.password);u.success("登录成功，欢迎回到修仙世界"),a.character&&a.character.spiritRootId?n.push("/"):n.push("/spirit-root-detection")}catch(a){u.error(b(a,"登录失败"))}finally{l.value=!1}};return(a,e)=>{const d=V,_=N,c=z,w=U;return B(),k("div",M,[e[6]||(e[6]=i("h2",{class:"form-title"},"登录",-1)),o(w,null,{default:t(()=>[o(_,null,{default:t(()=>[o(d,{value:s.value.username,"onUpdate:value":e[0]||(e[0]=r=>s.value.username=r),placeholder:"请输入用户名",size:"large"},{prefix:t(()=>[o(p(E),{size:18,class:"input-icon"})]),_:1},8,["value"])]),_:1}),o(_,null,{default:t(()=>[o(d,{value:s.value.password,"onUpdate:value":e[1]||(e[1]=r=>s.value.password=r),type:"password",placeholder:"请输入密码",size:"large","show-password-on":"click",onKeyup:L(m,["enter"])},{prefix:t(()=>[o(p(I),{size:18,class:"input-icon"})]),_:1},8,["value"])]),_:1}),o(c,{type:"primary",block:"",size:"large",loading:l.value,class:"submit-btn",onClick:m},{default:t(()=>[...e[3]||(e[3]=[v("进入修仙世界",-1)])]),_:1},8,["loading"])]),_:1}),i("div",R,[e[5]||(e[5]=i("span",{class:"footer-text"},"还没有账号？",-1)),o(c,{text:"",type:"primary",onClick:e[2]||(e[2]=r=>p(n).push("/auth/register"))},{default:t(()=>[...e[4]||(e[4]=[v("立即注册",-1)])]),_:1})])])}}}),W=K(S,[["__scopeId","data-v-dd7d637a"]]);export{W as default};
