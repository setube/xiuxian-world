import{e as rs,X as cs,f as d,N as x,S as ds,c as u,a as s,p as q,d as n,g as e,Z as r,j as c,F as X,q as G,w as _,c7 as v,k as m,n as A,l as h,o as i}from"./index-DA11XDlS.js";import{H as O}from"./heart-LgXo-eep.js";import{T as us}from"./triangle-alert-vQJa5xBQ.js";import{L as B}from"./lock-open-CSyDnSWl.js";import{c as W}from"./createLucideIcon-DiiZaxVK.js";import{C as vs}from"./check-Dvn_Mgz0.js";import{X as ms}from"./x-DGyACQy4.js";import{L}from"./lock-CWZIQcVF.js";import{C as E}from"./clock-Bnzg_83l.js";import{U as J}from"./users-DzD0wEV-.js";import{U as K}from"./user-CXIJJnqr.js";import{S as ps}from"./sparkles-tsZM6BNv.js";import{S as bs}from"./skull-BAbr3491.js";import{Z as _s}from"./zap-vMqaBpWc.js";import{F as fs}from"./flame-DuW_991e.js";import{u as hs}from"./use-message--i6DiThE.js";import{N as ys,b as U}from"./Tabs-CdCqfdBl.js";import{_ as j}from"./Input-DOOhwlQ-.js";import{_ as gs}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Add-C6IKdIGC.js";import"./use-compitable-BnEdbODL.js";import"./use-merged-state-DvdMjKiF.js";import"./use-locale-EBm6emhn.js";const ks=W("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);const Q=W("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ws={class:"hehuan-page"},Cs={class:"page-header"},zs={class:"header-icon"},Ss={key:0,class:"enslaved-warning"},Bs={class:"warning-content"},Ns={class:"warning-desc"},Is=["disabled"],Ts={key:1,class:"invites-section"},Ms={class:"section-title"},$s={class:"badge"},xs={class:"invite-list"},qs={class:"invite-info"},As={class:"invite-type"},Ls={class:"invite-from"},Es={class:"invite-actions"},Us=["onClick"],js=["onClick"],Rs={class:"tab-label"},Ds={class:"tab-content"},Hs={class:"realm-card basic-realm"},Fs={class:"realm-header"},Vs={class:"action-section"},Zs={key:0,class:"cooldown-info"},Ps={key:1,class:"target-input"},Xs=["disabled"],Gs={class:"tab-label"},Os={class:"tab-content"},Js={class:"realm-card bond-realm"},Ks={class:"realm-header"},Qs={key:0,class:"bond-active"},Ws={class:"bond-partner"},Ys={class:"partner-avatar"},sa={class:"partner-info"},aa={class:"partner-name"},ta={class:"partner-realm"},ea={class:"bond-timer"},la={class:"bond-stats"},na={class:"stat-item"},oa={class:"stat-value"},ia={class:"stat-item"},ra={class:"stat-value"},ca=["disabled"],da={key:1,class:"bond-empty"},ua={class:"target-input"},va=["disabled"],ma={class:"tab-label"},pa={class:"tab-content"},ba={class:"realm-card imprint-realm"},_a={class:"realm-header"},fa={class:"action-section"},ha={class:"target-input"},ya=["disabled"],ga={key:0,class:"slaves-section"},ka={class:"section-title"},wa={class:"count"},Ca={class:"slaves-list"},za={class:"slave-info"},Sa={class:"slave-avatar"},Ba={class:"slave-details"},Na={class:"slave-name"},Ia={class:"slave-realm"},Ta={class:"slave-stats"},Ma={class:"stat"},$a={class:"timer"},xa=["disabled","onClick"],qa=rs({__name:"HehuanArts",setup(Aa){const o=hs(),f=cs(),R=d("basic"),D=d(!1),y=d(""),g=d(""),k=d(""),H=d(!1),F=d(null),V=d(!1),z=d([]),p=d(null),w=d([]),N=d(0),S=d(0),I=x(()=>{const t=f.character;return t?.realm?t.realm.tier>1||t.realm.tier===1&&t.realm.subTier>=4:!1}),T=x(()=>{const t=f.character;return t?.realm?t.realm.tier>=2:!1}),M=x(()=>{const t=f.character;return t?.realm?t.realm.tier>=3:!1});function $(t){if(t<=0)return"可用";const a=Math.floor(t/36e5),l=Math.floor(t%36e5/6e4);return a>0?`${a}时${l}分`:`${l}分钟`}function Z(t){const a=Date.now(),l=t-a;if(l<=0)return"已到期";const C=Math.floor(l/864e5),P=Math.floor(l%864e5/36e5);return C>0?`${C}天${P}时`:`${P}小时`}function Y(t){return{basic:"闭关双修",bond:"缔结同参",nourish:"双修温养"}[t]||t}async function b(){try{D.value=!0;const{data:t}=await v.getStatus();H.value=t.isEnslaved||!1,F.value=t.enslavedInfo||null,V.value=t.canEscape||!1,z.value=t.pendingInvites||[],p.value=t.bondInfo||null,w.value=t.slaves||[],N.value=t.basicCooldown||0,S.value=t.nourishCooldown||0}catch(t){o.error(m(t,"获取状态失败"))}finally{D.value=!1}}async function ss(){try{const{data:t}=await v.inviteBasicDual(y.value);o.success(t.message||"双修邀请已发送"),y.value=""}catch(t){o.error(m(t,"发送邀请失败"))}}async function as(){try{const{data:t}=await v.inviteSoulBond(g.value);o.success(t.message||"同参邀请已发送"),g.value=""}catch(t){o.error(m(t,"发送邀请失败"))}}async function ts(){try{const{data:t}=await v.initiateNourish();o.success(t.message||"温养邀请已发送"),await b()}catch(t){o.error(m(t,"发起温养失败"))}}async function es(){try{const{data:t}=await v.initiateSoulBattle(k.value);t.success?o.success(t.message||"心神之战胜利，目标已成为你的炉鼎"):o.warning(t.message||"心神之战失败"),k.value="",await b()}catch(t){o.error(m(t,"心神之战失败"))}}async function ls(t){try{const{data:a}=await v.harvestSlave(t);o.success(a.message||`采补成功，获得 ${a.expGain} 修为`),await b(),await f.fetchStats()}catch(a){o.error(m(a,"采补失败"))}}async function ns(){try{const{data:t}=await v.attemptEscape();t.escaped?o.success("成功挣脱心印！"):o.warning(t.message||"挣脱失败，被反噬采补"),await b(),await f.fetchStats()}catch(t){o.error(m(t,"挣脱失败"))}}async function os(t){try{t.type==="basic"?await v.acceptBasicDual(t.id):t.type==="bond"?await v.acceptSoulBond(t.id):t.type==="nourish"&&await v.acceptNourish(t.id),o.success("已接受邀请"),await b(),await f.fetchStats()}catch(a){o.error(m(a,"接受邀请失败"))}}async function is(t){try{t.type==="basic"?await v.rejectBasicDual(t.id):t.type==="bond"&&await v.rejectSoulBond(t.id),o.success("已拒绝邀请"),await b()}catch(a){o.error(m(a,"拒绝邀请失败"))}}return ds(()=>{b()}),(t,a)=>(i(),u("div",ws,[s("div",Cs,[s("div",zs,[n(e(O),{size:24})]),a[4]||(a[4]=s("div",{class:"header-info"},[s("h1",null,"情缘三境"),s("p",null,"合欢宗秘法，以情入道")],-1))]),H.value?(i(),u("div",Ss,[n(e(us),{size:20}),s("div",Bs,[a[5]||(a[5]=s("span",{class:"warning-title"},"身陷心印",-1)),s("span",Ns,"你被 "+r(F.value?.masterName)+" 种下心印，沦为炉鼎",1)]),s("button",{class:"escape-btn",disabled:!V.value,onClick:ns},[n(e(B),{size:16}),a[6]||(a[6]=c(" 挣脱心印 ",-1))],8,Is)])):q("",!0),z.value.length>0?(i(),u("div",Ts,[s("h3",Ms,[n(e(ks),{size:16}),a[7]||(a[7]=c(" 待处理邀请 ",-1)),s("span",$s,r(z.value.length),1)]),s("div",xs,[(i(!0),u(X,null,G(z.value,l=>(i(),u("div",{key:l.id,class:"invite-item"},[s("div",qs,[s("span",As,r(Y(l.type)),1),s("span",Ls,"来自 "+r(l.initiatorName),1)]),s("div",Es,[s("button",{class:"accept-btn",onClick:C=>os(l)},[n(e(vs),{size:14}),a[8]||(a[8]=c(" 接受 ",-1))],8,Us),s("button",{class:"reject-btn",onClick:C=>is(l)},[n(e(ms),{size:14}),a[9]||(a[9]=c(" 拒绝 ",-1))],8,js)])]))),128))])])):q("",!0),n(e(ys),{value:R.value,"onUpdate:value":a[3]||(a[3]=l=>R.value=l),type:"segment",animated:"",class:"realm-tabs"},{default:_(()=>[n(e(U),{name:"basic"},{tab:_(()=>[s("div",Rs,[n(e(J),{size:14}),a[10]||(a[10]=s("span",null,"凡尘缘",-1))])]),default:_(()=>[s("div",Ds,[s("div",Hs,[s("div",Fs,[a[12]||(a[12]=s("div",{class:"realm-title"},[s("span",{class:"realm-name"},"凡尘缘"),s("span",{class:"realm-subtitle"},"闭关双修")],-1)),s("div",{class:A(["realm-requirement",{met:I.value}])},[I.value?(i(),h(e(B),{key:1,size:14})):(i(),h(e(L),{key:0,size:14})),a[11]||(a[11]=c(" 炼气四层 ",-1))],2)]),a[14]||(a[14]=s("p",{class:"realm-desc"},"与他人闭关双修，共同提升修为。双方均可获得修为，合欢宗弟子额外+10%收益。",-1)),a[15]||(a[15]=s("div",{class:"realm-stats"},[s("div",{class:"stat-item"},[s("span",{class:"stat-label"},"基础修为"),s("span",{class:"stat-value"},"+200")]),s("div",{class:"stat-item"},[s("span",{class:"stat-label"},"顿悟概率"),s("span",{class:"stat-value"},"5%")]),s("div",{class:"stat-item"},[s("span",{class:"stat-label"},"冷却时间"),s("span",{class:"stat-value"},"4小时")])],-1)),s("div",Vs,[N.value>0?(i(),u("div",Zs,[n(e(E),{size:14}),s("span",null,"冷却中："+r($(N.value)),1)])):(i(),u("div",Ps,[n(e(j),{value:y.value,"onUpdate:value":a[0]||(a[0]=l=>y.value=l),placeholder:"输入对方道号"},null,8,["value"]),s("button",{class:"action-btn",disabled:!y.value||!I.value,onClick:ss},[n(e(O),{size:16}),a[13]||(a[13]=c(" 发起双修 ",-1))],8,Xs)]))])])])]),_:1}),n(e(U),{name:"bond"},{tab:_(()=>[s("div",Gs,[n(e(Q),{size:14}),a[16]||(a[16]=s("span",null,"同参道",-1))])]),default:_(()=>[s("div",Os,[s("div",Js,[s("div",Ks,[a[18]||(a[18]=s("div",{class:"realm-title"},[s("span",{class:"realm-name"},"同参道"),s("span",{class:"realm-subtitle"},"缔结同参")],-1)),s("div",{class:A(["realm-requirement",{met:T.value}])},[T.value?(i(),h(e(B),{key:1,size:14})):(i(),h(e(L),{key:0,size:14})),a[17]||(a[17]=c(" 筑基初期 ",-1))],2)]),p.value?(i(),u("div",Qs,[s("div",Ws,[s("div",Ys,[n(e(K),{size:24})]),s("div",sa,[s("span",aa,r(p.value.partnerName),1),s("span",ta,r(p.value.partnerRealm),1)]),s("div",ea,[n(e(E),{size:14}),s("span",null,r(Z(p.value.expiresAt)),1)])]),s("div",la,[s("div",na,[a[19]||(a[19]=s("span",{class:"stat-label"},"温养次数",-1)),s("span",oa,r(p.value.nourishCount),1)]),s("div",ia,[a[20]||(a[20]=s("span",{class:"stat-label"},"累计贡献",-1)),s("span",ra,r(p.value.totalContribution),1)])]),s("button",{class:"action-btn nourish-btn",disabled:S.value>0,onClick:ts},[n(e(ps),{size:16}),c(" "+r(S.value>0?`温养冷却：${$(S.value)}`:"双修温养"),1)],8,ca)])):(i(),u("div",da,[a[22]||(a[22]=s("p",{class:"realm-desc"},"与他人缔结7天同参契约，期间可进行双修温养，获得更高修为收益与宗门贡献。",-1)),a[23]||(a[23]=s("div",{class:"realm-stats"},[s("div",{class:"stat-item"},[s("span",{class:"stat-label"},"基础修为"),s("span",{class:"stat-value"},"+350")]),s("div",{class:"stat-item"},[s("span",{class:"stat-label"},"同参加成"),s("span",{class:"stat-value"},"+50%")]),s("div",{class:"stat-item"},[s("span",{class:"stat-label"},"冷却时间"),s("span",{class:"stat-value"},"2小时")])],-1)),s("div",ua,[n(e(j),{value:g.value,"onUpdate:value":a[1]||(a[1]=l=>g.value=l),placeholder:"输入对方道号"},null,8,["value"]),s("button",{class:"action-btn",disabled:!g.value||!T.value,onClick:as},[n(e(Q),{size:16}),a[21]||(a[21]=c(" 缔结同参 ",-1))],8,va)])]))])])]),_:1}),n(e(U),{name:"imprint"},{tab:_(()=>[s("div",ma,[n(e(fs),{size:14}),a[24]||(a[24]=s("span",null,"魔染道",-1))])]),default:_(()=>[s("div",pa,[s("div",ba,[s("div",_a,[a[26]||(a[26]=s("div",{class:"realm-title"},[s("span",{class:"realm-name"},"魔染道"),s("span",{class:"realm-subtitle"},"种下心印")],-1)),s("div",{class:A(["realm-requirement",{met:M.value}])},[M.value?(i(),h(e(B),{key:1,size:14})):(i(),h(e(L),{key:0,size:14})),a[25]||(a[25]=c(" 金丹初期 ",-1))],2)]),a[28]||(a[28]=s("p",{class:"realm-desc warning-text"},"通过心神之战，将他人化为炉鼎，可从其身上采补修为。此为魔道禁术，需谨慎行事。",-1)),a[29]||(a[29]=s("div",{class:"realm-stats"},[s("div",{class:"stat-item"},[s("span",{class:"stat-label"},"采补修为"),s("span",{class:"stat-value"},"+500")]),s("div",{class:"stat-item"},[s("span",{class:"stat-label"},"奴役时长"),s("span",{class:"stat-value"},"3天")]),s("div",{class:"stat-item"},[s("span",{class:"stat-label"},"最大炉鼎"),s("span",{class:"stat-value"},"3")])],-1)),s("div",fa,[s("div",ha,[n(e(j),{value:k.value,"onUpdate:value":a[2]||(a[2]=l=>k.value=l),placeholder:"输入目标道号"},null,8,["value"]),s("button",{class:"action-btn danger-btn",disabled:!k.value||!M.value||w.value.length>=3,onClick:es},[n(e(bs),{size:16}),a[27]||(a[27]=c(" 心神之战 ",-1))],8,ya)])])]),w.value.length>0?(i(),u("div",ga,[s("h3",ka,[n(e(J),{size:16}),a[30]||(a[30]=c(" 炉鼎列表 ",-1)),s("span",wa,r(w.value.length)+"/3",1)]),s("div",Ca,[(i(!0),u(X,null,G(w.value,l=>(i(),u("div",{key:l.id,class:"slave-item"},[s("div",za,[s("div",Sa,[n(e(K),{size:20})]),s("div",Ba,[s("span",Na,r(l.targetName),1),s("span",Ia,r(l.targetRealm),1)])]),s("div",Ta,[s("span",Ma,"采补 "+r(l.harvestCount)+" 次",1),s("span",$a,[n(e(E),{size:12}),c(" "+r(Z(l.expiresAt)),1)])]),s("button",{class:"harvest-btn",disabled:l.cooldown>0,onClick:C=>ls(l.id)},[n(e(_s),{size:14}),c(" "+r(l.cooldown>0?$(l.cooldown):"采补"),1)],8,xa)]))),128))])])):q("",!0)])]),_:1})]),_:1},8,["value"])]))}}),lt=gs(qa,[["__scopeId","data-v-b1bd218a"]]);export{lt as default};
