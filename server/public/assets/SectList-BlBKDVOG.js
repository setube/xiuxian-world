import{e as G,ac as H,f as S,N as P,S as Z,c as r,a as s,p as m,d,g as n,Z as a,w as u,r as K,F as b,q as C,a4 as J,j as p,n as w,s as g,l as x,a1 as L,B as q,h as O,o as i}from"./index-DA11XDlS.js";import{B as Q}from"./building-2-BYTMGtPh.js";import{C as W}from"./clock-Bnzg_83l.js";import{I as X}from"./info-qMNw81gd.js";import{S as N}from"./sparkles-tsZM6BNv.js";import{c as Y}from"./createLucideIcon-DiiZaxVK.js";import{C as ee}from"./coins-Ks2rpWqM.js";import{E as se}from"./eye-DNttFUWn.js";import{U as te}from"./user-plus-D5P68FjT.js";import{G as oe}from"./gift-BEOm1WG9.js";import{S as $}from"./sun-CivYJ-dd.js";import{S as le}from"./sword-BlVHvUf1.js";import{S as ne}from"./skull-BAbr3491.js";import{R as ae}from"./rabbit-CSDpokCM.js";import{S as I}from"./star-D9p6u3Oh.js";import{H as ie}from"./heart-LgXo-eep.js";import{L as re}from"./leaf-CVdWMOfX.js";import{u as de}from"./use-message--i6DiThE.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ce=Y("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),me={class:"sect-list-page"},ve={class:"page-header"},pe={class:"page-title"},fe={key:0,class:"cooldown-notice"},_e={key:1,class:"has-sect-notice"},ye={class:"filter-tabs"},ge=["onClick"],ke={class:"sect-grid"},he={class:"sect-header"},Se={class:"sect-title"},be={class:"sect-name"},Ce={class:"sect-desc"},we={class:"sect-features"},qe={class:"feature-name"},ze={class:"sect-info"},Re={class:"info-item"},Be={class:"info-item"},Je={class:"sect-actions"},xe=["onClick"],Le=["disabled","onClick"],Ne={key:0,class:"detail-header"},$e={key:0,class:"detail-content"},Ie={class:"detail-section"},Me={class:"lore-text"},Te={class:"detail-section"},je={class:"features-list"},De={class:"feature-header"},Ee={class:"feature-title"},Ue={class:"feature-desc"},Ve={class:"detail-section"},Ae={key:0,class:"daily-bonus"},Fe={class:"detail-section"},Ge={class:"requirements"},He={key:0,class:"req-item"},Pe={class:"req-value"},Ze={key:1,class:"req-item"},Ke={class:"req-value"},Oe={key:2,class:"req-item"},Qe={class:"detail-footer"},We={key:0,class:"confirm-content"},Xe=G({__name:"SectList",setup(Ye){const M=O(),c=H(),z=de(),T=[{label:"全部",value:"all"},{label:"正道",value:"righteous"},{label:"中立",value:"neutral"},{label:"魔道",value:"demonic"}],k=S("all"),j=P(()=>{const l=c.getAllSects();return k.value==="all"?l:l.filter(e=>e.alignment===k.value)}),_=S(!1),y=S(!1),o=S(null),v=l=>c.canJoinSect(l),D=l=>{o.value=l,_.value=!0},R=l=>{const e=v(l.id);if(!e.canJoin){z.warning(e.reason||"无法拜入");return}o.value=l,_.value=!1,y.value=!0},E=async()=>{if(!o.value)return;const l=await c.joinSect(o.value.id);l.success?(z.success(l.message),y.value=!1,M.push("/sect/my")):z.error(l.message)},B=l=>({Leaf:re,Eye:$,Heart:ie,Star:I,Rabbit:ae,Skull:ne,Sword:le,Sun:$})[l]||I,U=l=>({righteous:"正道",neutral:"中立",demonic:"魔道"})[l]||l,V=l=>({1:"炼气期",2:"筑基期",3:"结丹期",4:"元婴期",5:"化神期",6:"炼虚期"})[l]||"未知",A=l=>{const e={heavenly:"天灵根",variant:"异灵根",true:"真灵根",pseudo:"伪灵根",waste:"废灵根"};return l.map(h=>e[h]||h).join("、")};return Z(()=>{c.init()}),(l,e)=>{const h=K("router-link");return i(),r("div",me,[s("div",ve,[s("h1",pe,[d(n(Q),{size:24}),e[5]||(e[5]=s("span",null,"拜入宗门",-1))]),e[6]||(e[6]=s("p",{class:"page-desc"},"散修之路艰辛，拜入宗门方有依仗",-1))]),n(c).isInLeaveCooldown?(i(),r("div",fe,[d(n(W),{size:18}),s("span",null,"叛门冷却中："+a(n(c).leaveCooldownRemaining)+"后可拜入新宗门",1)])):m("",!0),n(c).hasSect?(i(),r("div",_e,[d(n(X),{size:18}),s("span",null,"你已是"+a(n(c).currentSect?.name)+"弟子",1),d(h,{to:"/sect/my",class:"link-btn"},{default:u(()=>[...e[7]||(e[7]=[p("查看我的宗门",-1)])]),_:1})])):m("",!0),s("div",ye,[(i(),r(b,null,C(T,t=>s("button",{key:t.value,class:w(["filter-tab",{active:k.value===t.value}]),onClick:f=>k.value=t.value},a(t.label),11,ge)),64))]),s("div",ke,[(i(!0),r(b,null,C(j.value,t=>(i(),r("div",{key:t.id,class:w(["sect-card",[`alignment-${t.alignment}`]]),style:g({"--sect-color":t.color})},[s("div",he,[s("div",{class:"sect-icon",style:g({background:t.color+"20",color:t.color})},[(i(),x(L(B(t.icon)),{size:28}))],4),s("div",Se,[s("h3",be,a(t.name),1),s("span",{class:w(["sect-alignment",t.alignment])},a(U(t.alignment)),3)])]),s("p",Ce,a(t.description),1),s("div",we,[(i(!0),r(b,null,C(t.features.slice(0,3),(f,F)=>(i(),r("div",{key:F,class:"feature-item"},[d(n(N),{size:14}),s("span",qe,a(f.name),1)]))),128))]),s("div",ze,[s("div",Re,[d(n(ce),{size:14}),s("span",null,a(t.location),1)]),s("div",Be,[d(n(ee),{size:14}),s("span",null,"日俸 "+a(t.baseSalary)+" 灵石",1)])]),s("div",Je,[s("button",{class:"detail-btn",onClick:f=>D(t)},[d(n(se),{size:16}),e[8]||(e[8]=s("span",null,"详情",-1))],8,xe),s("button",{class:w(["join-btn",{disabled:!v(t.id).canJoin}]),disabled:!v(t.id).canJoin,onClick:f=>R(t)},[d(n(te),{size:16}),s("span",null,a(v(t.id).canJoin?"拜入":v(t.id).reason),1)],10,Le)])],6))),128))]),d(n(J),{show:_.value,"onUpdate:show":e[2]||(e[2]=t=>_.value=t),preset:"card",style:{width:"480px"}},{header:u(()=>[o.value?(i(),r("div",Ne,[s("div",{class:"detail-icon",style:g({background:o.value.color+"20",color:o.value.color})},[(i(),x(L(B(o.value.icon)),{size:24}))],4),s("span",null,a(o.value.name),1)])):m("",!0)]),footer:u(()=>[s("div",Qe,[d(n(q),{onClick:e[0]||(e[0]=t=>_.value=!1)},{default:u(()=>[...e[16]||(e[16]=[p("关闭",-1)])]),_:1}),d(n(q),{type:"primary",disabled:!o.value||!v(o.value.id).canJoin,onClick:e[1]||(e[1]=t=>R(o.value))},{default:u(()=>[p(a(o.value&&v(o.value.id).canJoin?"拜入宗门":v(o.value?.id||"").reason),1)]),_:1},8,["disabled"])])]),default:u(()=>[o.value?(i(),r("div",$e,[s("div",Ie,[e[9]||(e[9]=s("h4",{class:"section-title"},"宗门背景",-1)),s("p",Me,a(o.value.lore),1)]),s("div",Te,[e[10]||(e[10]=s("h4",{class:"section-title"},"宗门特性",-1)),s("div",je,[(i(!0),r(b,null,C(o.value.features,(t,f)=>(i(),r("div",{key:f,class:"feature-detail"},[s("div",De,[d(n(N),{size:16,style:g({color:o.value.color})},null,8,["style"]),s("span",Ee,a(t.name),1)]),s("p",Ue,a(t.description),1)]))),128))])]),s("div",Ve,[e[11]||(e[11]=s("h4",{class:"section-title"},"每日福利",-1)),o.value.dailyBonus?(i(),r("div",Ae,[d(n(oe),{size:16}),s("span",null,a(o.value.dailyBonus.description),1)])):m("",!0)]),s("div",Fe,[e[15]||(e[15]=s("h4",{class:"section-title"},"入门条件",-1)),s("div",Ge,[o.value.requirements.minRealm?(i(),r("div",He,[e[12]||(e[12]=s("span",{class:"req-label"},"最低境界：",-1)),s("span",Pe,a(V(o.value.requirements.minRealm)),1)])):m("",!0),o.value.requirements.spiritRootTypes?(i(),r("div",Ze,[e[13]||(e[13]=s("span",{class:"req-label"},"灵根要求：",-1)),s("span",Ke,a(A(o.value.requirements.spiritRootTypes)),1)])):m("",!0),!o.value.requirements.minRealm&&!o.value.requirements.spiritRootTypes?(i(),r("div",Oe,[...e[14]||(e[14]=[s("span",{class:"req-value"},"无特殊要求",-1)])])):m("",!0)])])])):m("",!0)]),_:1},8,["show"]),d(n(J),{show:y.value,"onUpdate:show":e[4]||(e[4]=t=>y.value=t),preset:"dialog",style:{width:"400px"}},{header:u(()=>[...e[17]||(e[17]=[s("span",null,"确认拜入",-1)])]),action:u(()=>[d(n(q),{onClick:e[3]||(e[3]=t=>y.value=!1)},{default:u(()=>[...e[21]||(e[21]=[p("取消",-1)])]),_:1}),d(n(q),{type:"primary",loading:n(c).loading,onClick:E},{default:u(()=>[...e[22]||(e[22]=[p("确认拜入",-1)])]),_:1},8,["loading"])]),default:u(()=>[o.value?(i(),r("div",We,[s("p",null,[e[18]||(e[18]=p(" 确定要拜入 ",-1)),s("strong",{style:g({color:o.value.color})},a(o.value.name),5),e[19]||(e[19]=p(" 吗？ ",-1))]),e[20]||(e[20]=s("p",{class:"confirm-hint"},"拜入后将获得宗门特性加成和每日福利。",-1))])):m("",!0)]),_:1},8,["show"])])}}}),ks=ue(Xe,[["__scopeId","data-v-47e943cc"]]);export{ks as default};
