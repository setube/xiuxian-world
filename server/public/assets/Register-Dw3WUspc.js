import{e as $,u as C,f as _,c as f,l as B,a as s,d as t,w as r,T as U,m as T,g as m,h as L,B as N,n as P,p as R,F as b,q as x,i as V,j as k,k as E,o as c,s as h}from"./index-DA11XDlS.js";import{U as F}from"./user-CXIJJnqr.js";import{M as K}from"./mail-yGaIrlDf.js";import{L as j}from"./lock-CWZIQcVF.js";import{S as q}from"./shield-check-fOgaozYJ.js";import{u as A}from"./use-message--i6DiThE.js";import{_ as D,a as I}from"./FormItem-BZYp5uQa.js";import{_ as W}from"./Input-DOOhwlQ-.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-DiiZaxVK.js";import"./format-length-B-p6aW7q.js";import"./get-DlSqnTrT.js";import"./use-locale-EBm6emhn.js";import"./use-merged-state-DvdMjKiF.js";const H={class:"register-container"},J={key:0,class:"warp-overlay"},O={class:"star-field"},Q={class:"speed-lines"},X={class:"form-footer"},Y=$({__name:"Register",setup(Z){const w=L(),z=C(),a=_({username:"",email:"",password:"",confirmPassword:""}),n=_(!1),o=_(!1),p=A(),y=async()=>{if(!a.value.username||!a.value.email||!a.value.password){p.warning("请填写所有字段");return}if(a.value.password!==a.value.confirmPassword){p.warning("两次密码输入不一致");return}if(a.value.password.length<6){p.warning("密码长度至少6位");return}n.value=!0;try{await z.register(a.value.username,a.value.email,a.value.password),p.success("注册成功"),n.value=!1,o.value=!0,setTimeout(()=>{w.push("/create-character")},3e3)}catch(d){p.error(E(d,"注册失败")),n.value=!1}},M=d=>{const e=d/100*360,i=20+Math.random()*80,u=1+Math.random()*2,v=Math.random()*.5,g=.8+Math.random()*.4;return{"--angle":`${e}deg`,"--distance":`${i}%`,"--size":`${u}px`,"--delay":`${v}s`,"--duration":`${g}s`}},S=d=>{const e=d/40*360,i=100+Math.random()*200,u=Math.random()*.3;return{"--angle":`${e}deg`,"--length":`${i}px`,"--delay":`${u}s`}};return(d,e)=>{const i=W,u=I,v=N,g=D;return c(),f("div",H,[(c(),B(T,{to:"body"},[t(U,{name:"warp"},{default:r(()=>[o.value?(c(),f("div",J,[s("div",O,[(c(),f(b,null,x(100,l=>s("span",{key:l,class:"star",style:h(M(l))},null,4)),64))]),s("div",Q,[(c(),f(b,null,x(40,l=>s("span",{key:l,class:"speed-line",style:h(S(l))},null,4)),64))]),e[5]||(e[5]=s("div",{class:"warp-center"},[s("div",{class:"warp-ring ring-1"}),s("div",{class:"warp-ring ring-2"}),s("div",{class:"warp-ring ring-3"}),s("div",{class:"warp-core"})],-1)),e[6]||(e[6]=s("div",{class:"warp-text"},[s("p",{class:"warp-title"},"踏入修仙之门"),s("p",{class:"warp-subtitle"},"仙缘已定，请取道号...")],-1))])):R("",!0)]),_:1})])),s("div",{class:P(["register-form",{"fade-out":o.value}])},[e[10]||(e[10]=s("h2",{class:"form-title"},"注册账号",-1)),t(g,null,{default:r(()=>[t(u,null,{default:r(()=>[t(i,{value:a.value.username,"onUpdate:value":e[0]||(e[0]=l=>a.value.username=l),placeholder:"用户名 (2-20个字符)",size:"large",disabled:n.value||o.value},{prefix:r(()=>[t(m(F),{size:18,class:"input-icon"})]),_:1},8,["value","disabled"])]),_:1}),t(u,null,{default:r(()=>[t(i,{value:a.value.email,"onUpdate:value":e[1]||(e[1]=l=>a.value.email=l),placeholder:"邮箱地址",size:"large",disabled:n.value||o.value},{prefix:r(()=>[t(m(K),{size:18,class:"input-icon"})]),_:1},8,["value","disabled"])]),_:1}),t(u,null,{default:r(()=>[t(i,{value:a.value.password,"onUpdate:value":e[2]||(e[2]=l=>a.value.password=l),type:"password",placeholder:"密码 (至少6位)",size:"large","show-password-on":"click",disabled:n.value||o.value},{prefix:r(()=>[t(m(j),{size:18,class:"input-icon"})]),_:1},8,["value","disabled"])]),_:1}),t(u,null,{default:r(()=>[t(i,{value:a.value.confirmPassword,"onUpdate:value":e[3]||(e[3]=l=>a.value.confirmPassword=l),type:"password",placeholder:"确认密码",size:"large","show-password-on":"click",disabled:n.value||o.value,onKeyup:V(y,["enter"])},{prefix:r(()=>[t(m(q),{size:18,class:"input-icon"})]),_:1},8,["value","disabled"])]),_:1}),t(v,{type:"primary",block:"",size:"large",loading:n.value,disabled:o.value,class:"submit-btn",onClick:y},{default:r(()=>[...e[7]||(e[7]=[k(" 开启修仙之旅 ",-1)])]),_:1},8,["loading","disabled"])]),_:1}),s("div",X,[e[9]||(e[9]=s("span",{class:"footer-text"},"已有账号？",-1)),t(v,{text:"",type:"primary",disabled:o.value,onClick:e[4]||(e[4]=l=>m(w).push("/auth/login"))},{default:r(()=>[...e[8]||(e[8]=[k("立即登录",-1)])]),_:1},8,["disabled"])])],2)])}}}),ve=G(Y,[["__scopeId","data-v-7388f5e1"]]);export{ve as default};
