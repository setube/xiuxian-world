import{e as K,f as u,S as P,c as o,a,p as f,d as h,g as C,F as M,q as x,Z as l,j as E,ab as m,k as D,n as z,l as T,a1 as S,s as $,o as n}from"./index-DA11XDlS.js";import{T as N}from"./trophy-B8Qqs7MA.js";import{C as j}from"./crown-CTywvOnR.js";import{c as U}from"./createLucideIcon-DiiZaxVK.js";import{A as Z}from"./award-B0i9BiiK.js";import{T as L}from"./trending-up-BXfb3B-f.js";import{C as G}from"./coins-Ks2rpWqM.js";import{T as H}from"./target-CxCFSND-.js";import{S as J}from"./skull-BAbr3491.js";import{S as O}from"./sword-BlVHvUf1.js";import{u as Q}from"./use-message--i6DiThE.js";import{_ as W}from"./Spin-C-vu5Ffa.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-compitable-BnEdbODL.js";const Y=U("medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),ee={class:"rankings-page"},ae={class:"page-header"},se={class:"header-icon"},te={class:"tabs"},ne=["onClick"],oe={key:0,class:"loading-state"},le={key:1,class:"empty-state"},re={key:2,class:"ranking-list"},ie={key:1,class:"rank-number"},ce={class:"player-info"},ue={class:"player-name"},de={class:"player-realm"},ve={key:0,class:"player-sect"},me={class:"player-value"},ke={key:3,class:"load-more"},pe=["disabled"],fe={key:4,class:"my-rank"},_e={class:"my-rank-value"},ye={key:0,class:"my-value"},k=50,ge=K({__name:"Rankings",setup(he){const V=Q(),d=u("cultivation"),r=u([]),i=u(null),_=u(!1),p=u(!1),y=u(!0),c=u(0),q=[{key:"cultivation",label:"修为榜"},{key:"power",label:"战力榜"},{key:"evil",label:"恶人榜"},{key:"pvpKills",label:"击杀榜"},{key:"loot",label:"掠夺榜"}],b=e=>e===1?j:e===2?Y:e===3?Z:null,A=e=>e===1?"#ffd700":e===2?"#c0c0c0":e===3?"#cd7f32":"var(--text-muted)",B=()=>{switch(d.value){case"cultivation":return L;case"power":return O;case"evil":return J;case"pvpKills":return H;case"loot":return G;default:return L}},w=e=>e>=1e8?(e/1e8).toFixed(1)+"亿":e>=1e4?(e/1e4).toFixed(1)+"万":e.toLocaleString(),g=async(e=!1)=>{e?p.value=!0:(_.value=!0,c.value=0,r.value=[]);try{let s;switch(d.value){case"cultivation":s=await m.getCultivationRanking(k,c.value);break;case"power":s=await m.getPowerRanking(k,c.value);break;case"evil":s=await m.getEvilRanking(k,c.value);break;case"pvpKills":s=await m.getPvpKillsRanking(k,c.value);break;case"loot":s=await m.getLootRanking(k,c.value);break}const v=s.data;e?r.value=[...r.value,...v]:r.value=v,y.value=v.length===k,c.value+=v.length}catch(s){V.error(D(s,"获取排行榜失败"))}finally{_.value=!1,p.value=!1}},R=async()=>{try{const e=await m.getMyRank(d.value);i.value=e.data}catch{i.value=null}},F=async e=>{d.value!==e&&(d.value=e,await Promise.all([g(),R()]))},I=async()=>{p.value||!y.value||await g(!0)};return P(async()=>{await Promise.all([g(),R()])}),(e,s)=>{const v=W;return n(),o("div",ee,[a("div",ae,[a("div",se,[h(C(N),{size:24})]),s[0]||(s[0]=a("div",{class:"header-info"},[a("h2",null,"天骄榜"),a("p",null,"修仙界最强者排行")],-1))]),a("div",te,[(n(),o(M,null,x(q,t=>a("div",{key:t.key,class:z(["tab-item",{active:d.value===t.key}]),onClick:be=>F(t.key)},l(t.label),11,ne)),64))]),_.value?(n(),o("div",oe,[h(v,{size:"medium"}),s[1]||(s[1]=a("span",null,"加载中...",-1))])):r.value.length===0?(n(),o("div",le,[h(C(N),{size:48,class:"empty-icon"}),s[2]||(s[2]=a("span",null,"暂无排行数据",-1))])):(n(),o("div",re,[(n(!0),o(M,null,x(r.value,t=>(n(),o("div",{key:t.rank,class:z(["ranking-item",{"top-three":t.rank<=3}])},[a("div",{class:"rank-badge",style:$({color:A(t.rank)})},[b(t.rank)?(n(),T(S(b(t.rank)),{key:0,size:20})):(n(),o("span",ie,l(t.rank),1))],4),a("div",ce,[a("span",ue,l(t.name),1),a("span",de,l(t.realmName),1),t.sectName?(n(),o("span",ve,l(t.sectName),1)):f("",!0)]),a("div",me,[(n(),T(S(B()),{size:14})),a("span",null,l(w(t.value)),1)])],2))),128))])),r.value.length>0&&y.value?(n(),o("div",ke,[a("button",{onClick:I,disabled:p.value},l(p.value?"加载中...":"加载更多"),9,pe)])):f("",!0),i.value?(n(),o("div",fe,[s[3]||(s[3]=a("span",{class:"my-rank-label"},"我的排名",-1)),a("span",_e,[E(l(i.value.rank>0?`第 ${i.value.rank} 名`:"未上榜")+" ",1),i.value.rank>0?(n(),o("span",ye,"（"+l(w(i.value.value))+"）",1)):f("",!0)])])):f("",!0)])}}}),Fe=X(ge,[["__scopeId","data-v-8c8f91db"]]);export{Fe as default};
