import{a2 as ke,f as S,N as M,ch as I,e as O,c as i,a as e,p as b,d as a,g as t,Z as o,B as R,w as v,j as u,F as N,q as F,o as n,n as W,bv as we,a4 as de,a9 as ze,S as Y,s as ge,l as U,i as Ce,a0 as be,c9 as ee,k as se}from"./index-DA11XDlS.js";import{Z as Q}from"./zap-vMqaBpWc.js";import{S as j}from"./sparkles-tsZM6BNv.js";import{C as ae}from"./clock-Bnzg_83l.js";import{A as ne}from"./arrow-right-DS-hLDue.js";import{C as K}from"./coins-Ks2rpWqM.js";import{P as A}from"./package-CRVIogFf.js";import{T as ie}from"./trending-up-BXfb3B-f.js";import{C as ue}from"./circle-check-big-B5OYv702.js";import{u as H}from"./use-message--i6DiThE.js";import{N as xe}from"./Progress-ctM85tqO.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as Se}from"./circle-alert-CQn7xOz3.js";import{C as fe}from"./crown-CTywvOnR.js";import{P as Me}from"./plus-BY3P3rBe.js";import{L as oe}from"./loader-Bk8qWIrR.js";import{c as X}from"./createLucideIcon-DiiZaxVK.js";import{L as Le}from"./lock-open-CSyDnSWl.js";import{E as Ve}from"./eye-DNttFUWn.js";import{L as _e}from"./lock-CWZIQcVF.js";import{U as Te}from"./user-plus-D5P68FjT.js";import{U as ve}from"./users-DzD0wEV-.js";import{H as Pe}from"./history-F1M976CY.js";import{T as Ee}from"./triangle-alert-vQJa5xBQ.js";import{S as Ie}from"./search-Cw5mh_gR.js";import{M as te}from"./mountain-C4LejbVd.js";import{_ as me}from"./Input-DOOhwlQ-.js";import{S as Re}from"./shield-check-fOgaozYJ.js";import{S as De,U as Ne,G as Fe}from"./undo-2-rKn3xdOe.js";import{W as qe}from"./wind-DSFUGIbd.js";import{T as Ue}from"./timer-C2OaA_iH.js";import{C as he}from"./circle-x-B-Ydbwdk.js";import{S as Ae}from"./shield-off-B7Fx9jMD.js";import{B as Oe}from"./book-open-B-z3oi1Q.js";import{S as He}from"./shield-BMlq6Nq0.js";import{N as Be,b as G}from"./Tabs-CdCqfdBl.js";import"./format-length-B-p6aW7q.js";import"./use-locale-EBm6emhn.js";import"./use-merged-state-DvdMjKiF.js";import"./Add-C6IKdIGC.js";import"./use-compitable-BnEdbODL.js";const Ge=X("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const $e=X("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const re=X("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);const je=X("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);const ce=X("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);const ye=X("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Z=ke("cave",()=>{const q=S(!1),l=S(null),c=S(null),r=S([]),k=S(0),w=S([]),p=S(0),m=S(!1),s=S(!1),f=M(()=>l.value?.spiritVein||null),C=M(()=>l.value?.meditationChamber||null),x=M(()=>l.value?.treasureDisplay||[]),h=M(()=>l.value?.displayedSceneries||[]),d=M(()=>l.value?.currentVisitor||null),T=M(()=>l.value?.stats||null),z=M(()=>c.value?.unlocked||[]),_=M(()=>c.value?.locked||[]),g=M(()=>(f.value?.pendingEnergy||0)>0),L=M(()=>(C.value?.pendingExp||0)>0),D=M(()=>d.value!==null),$=M(()=>r.value.filter(y=>!y.isRead).length),V=async()=>{try{const{data:y}=await I.canOpen();return y}catch{return{canOpen:!1,reason:"检查失败"}}},E=async()=>{m.value=!0;try{const{data:y}=await I.getInfo();return q.value=y.hasCave,l.value=y.cave||null,y}finally{m.value=!1}},le=async()=>{try{const{data:y}=await I.getSceneryGallery();return c.value=y,y}catch{return null}},pe=async(y=1)=>{try{const{data:P}=await I.getMessages(y);return r.value=P.messages,k.value=P.total,P}catch{return null}};return{hasCave:q,cave:l,sceneryGallery:c,messages:r,messagesTotal:k,visitorLogs:w,visitorLogsTotal:p,loading:m,actionLoading:s,spiritVein:f,meditationChamber:C,treasureDisplay:x,displayedSceneries:h,currentVisitor:d,stats:T,unlockedSceneries:z,lockedSceneries:_,hasPendingEnergy:g,hasPendingExp:L,hasVisitor:D,unreadMessagesCount:$,checkCanOpen:V,fetchCaveInfo:E,fetchSceneryGallery:le,fetchMessages:pe,fetchVisitorLogs:async(y=1)=>{try{const{data:P}=await I.getVisitorLogs(y);return w.value=P.logs,p.value=P.total,P}catch{return null}},openCave:async()=>{s.value=!0;try{const{data:y}=await I.open();return await E(),y}finally{s.value=!1}},harvestEnergy:async()=>{s.value=!0;try{const{data:y}=await I.harvestEnergy();return await E(),y}finally{s.value=!1}},upgradeSpiritVein:async()=>{s.value=!0;try{const{data:y}=await I.upgradeSpiritVein();return await E(),y}finally{s.value=!1}},convertEnergy:async()=>{s.value=!0;try{const{data:y}=await I.convertEnergy();return await E(),y}finally{s.value=!1}},upgradeMeditation:async()=>{s.value=!0;try{const{data:y}=await I.upgradeMeditation();return await E(),y}finally{s.value=!1}},displayTreasure:async(y,P)=>{s.value=!0;try{const{data:J}=await I.displayTreasure(y,P);return await E(),J}finally{s.value=!1}},removeTreasure:async y=>{s.value=!0;try{const{data:P}=await I.removeTreasure(y);return await E(),P}finally{s.value=!1}},toggleScenery:async y=>{s.value=!0;try{const{data:P}=await I.toggleScenery(y);return await Promise.all([E(),le()]),P}finally{s.value=!1}},receiveVisitor:async()=>{s.value=!0;try{const{data:y}=await I.receiveVisitor();return await E(),y}finally{s.value=!1}},expelVisitor:async()=>{s.value=!0;try{const{data:y}=await I.expelVisitor();return await E(),y}finally{s.value=!1}},visitCave:async y=>{s.value=!0;try{const{data:P}=await I.visitCave(y);return P}finally{s.value=!1}},leaveMessage:async(y,P)=>{s.value=!0;try{const{data:J}=await I.leaveMessage(y,P);return J}finally{s.value=!1}},markMessageRead:async y=>{try{await I.markMessageRead(y);const P=r.value.find(J=>J.id===y);P&&(P.isRead=!0)}catch{}},initialize:async()=>{await E(),q.value&&await Promise.all([le(),pe()])},clear:()=>{q.value=!1,l.value=null,c.value=null,r.value=[],k.value=0,w.value=[],p.value=0}}}),Ze={class:"spirit-vein-panel"},Ke={class:"info-card"},We={class:"card-header"},Xe={class:"card-icon"},Je={class:"card-title"},Qe={class:"level-badge"},Ye={class:"energy-section"},es={class:"energy-header"},ss={class:"energy-value"},ts={key:0,class:"pending-energy"},as={class:"pending-icon"},ns={class:"pending-info"},is={class:"pending-value"},os={class:"production-info"},ls={class:"info-item"},rs={key:0,class:"upgrade-card"},cs={class:"upgrade-preview"},ds={class:"preview-item"},us={class:"preview-change"},vs={class:"preview-item"},ps={class:"preview-change"},_s={key:0,class:"upgrade-cost"},ms={class:"cost-item"},ys={key:1,class:"max-level-hint"},gs=O({__name:"SpiritVeinPanel",setup(q){const l=Z(),c=H(),r=M(()=>l.spiritVein),k=M(()=>r.value?Math.min(100,r.value.currentEnergy/r.value.maxStorage*100):0),w=async()=>{try{const m=await l.harvestEnergy();c.success(`成功收取 ${m.harvested} 灵气`)}catch(m){c.error(m.message||"收取失败")}},p=async()=>{try{const m=await l.upgradeSpiritVein();c.success(`灵脉升级至 Lv.${m.newLevel}`)}catch(m){c.error(m.message||"升级失败")}};return(m,s)=>(n(),i("div",Ze,[e("div",Ke,[e("div",We,[e("div",Xe,[a(t(Q),{size:20})]),e("div",Je,[s[0]||(s[0]=e("h3",null,"灵脉",-1)),e("span",Qe,"Lv."+o(r.value?.level||0)+" / "+o(r.value?.maxLevel||10),1)])]),e("div",Ye,[e("div",es,[s[1]||(s[1]=e("span",{class:"energy-label"},"灵气存储",-1)),e("span",ss,o(r.value?.currentEnergy||0)+" / "+o(r.value?.maxStorage||0),1)]),a(t(xe),{type:"line",percentage:k.value,height:12,"border-radius":6,"fill-border-radius":6,color:"#8a6db7","rail-color":"rgba(138, 109, 183, 0.15)"},null,8,["percentage"])]),r.value?.pendingEnergy&&r.value.pendingEnergy>0?(n(),i("div",ts,[e("div",as,[a(t(j),{size:16,class:"sparkle-anim"})]),e("div",ns,[s[2]||(s[2]=e("span",{class:"pending-label"},"待收取",-1)),e("span",is,"+"+o(r.value.pendingEnergy),1)]),a(t(R),{type:"primary",size:"small",loading:t(l).actionLoading,onClick:w},{default:v(()=>[...s[3]||(s[3]=[u("收取",-1)])]),_:1},8,["loading"])])):b("",!0),e("div",os,[e("div",ls,[a(t(ae),{size:14}),e("span",null,"每小时产出："+o(r.value?.productionPerHour||0)+" 灵气",1)])])]),r.value?.canUpgrade?(n(),i("div",rs,[s[10]||(s[10]=e("h4",null,"升级灵脉",-1)),s[11]||(s[11]=e("p",{class:"upgrade-desc"},"提升灵脉等级，增加灵气产出和存储上限",-1)),e("div",cs,[e("div",ds,[s[5]||(s[5]=e("span",{class:"preview-label"},"产出",-1)),e("span",us,[u(o(r.value?.productionPerHour)+" ",1),a(t(ne),{size:12}),s[4]||(s[4]=u(" ? ",-1))])]),e("div",vs,[s[7]||(s[7]=e("span",{class:"preview-label"},"存储",-1)),e("span",ps,[u(o(r.value?.maxStorage)+" ",1),a(t(ne),{size:12}),s[6]||(s[6]=u(" ? ",-1))])])]),r.value?.upgradeCost?(n(),i("div",_s,[s[8]||(s[8]=e("span",{class:"cost-label"},"升级消耗：",-1)),e("span",ms,[a(t(K),{size:14}),u(" "+o(r.value.upgradeCost.spiritStones)+" 灵石 ",1)]),(n(!0),i(N,null,F(r.value.upgradeCost.items,f=>(n(),i("span",{key:f.itemId,class:"cost-item"},[a(t(A),{size:14}),u(" "+o(f.quantity)+"x ",1)]))),128))])):b("",!0),a(t(R),{type:"primary",loading:t(l).actionLoading,onClick:p},{icon:v(()=>[a(t(ie),{size:16})]),default:v(()=>[s[9]||(s[9]=u(" 升级灵脉 ",-1))]),_:1},8,["loading"])])):(n(),i("div",ys,[a(t(ue),{size:20}),s[12]||(s[12]=e("span",null,"灵脉已达满级",-1))]))]))}}),fs=B(gs,[["__scopeId","data-v-e9691d1b"]]),hs={class:"meditation-panel"},$s={class:"info-card"},ks={class:"card-header"},ws={class:"card-icon"},zs={class:"card-title"},Cs={class:"level-badge"},bs={class:"conversion-info"},xs={class:"info-row"},Ss={class:"info-value"},Ms={class:"info-row"},Ls={class:"info-value"},Vs={key:0,class:"pending-exp"},Ts={class:"pending-icon"},Ps={class:"pending-info"},Es={class:"pending-value"},Is={key:1,class:"no-energy-hint"},Rs={key:2,class:"cooldown-hint"},Ds={key:0,class:"upgrade-card"},Ns={class:"upgrade-preview"},Fs={class:"preview-item"},qs={class:"preview-change"},Us={class:"preview-item"},As={class:"preview-change"},Os={key:0,class:"upgrade-cost"},Hs={class:"cost-item"},Bs={key:1,class:"max-level-hint"},Gs=O({__name:"MeditationPanel",setup(q){const l=Z(),c=H(),r=M(()=>l.meditationChamber),k=M(()=>(l.spiritVein?.currentEnergy||0)>0),w=async()=>{try{const m=await l.convertEnergy();c.success(`转化成功！获得 ${m.expGained} 修为`)}catch(m){c.error(m.message||"转化失败")}},p=async()=>{try{const m=await l.upgradeMeditation();c.success(`静室升级至 Lv.${m.newLevel}`)}catch(m){c.error(m.message||"升级失败")}};return(m,s)=>(n(),i("div",hs,[e("div",$s,[e("div",ks,[e("div",ws,[a(t(j),{size:20})]),e("div",zs,[s[0]||(s[0]=e("h3",null,"静室",-1)),e("span",Cs,"Lv."+o(r.value?.level||0)+" / "+o(r.value?.maxLevel||10),1)])]),e("div",bs,[e("div",xs,[s[1]||(s[1]=e("span",{class:"info-label"},"转化率",-1)),e("span",Ss,o(r.value?.conversionRate||0)+"x",1)]),e("div",Ms,[s[2]||(s[2]=e("span",{class:"info-label"},"每小时转化上限",-1)),e("span",Ls,o(r.value?.maxConversionPerHour||0)+" 灵气",1)])]),r.value?.pendingExp&&r.value.pendingExp>0?(n(),i("div",Vs,[e("div",Ts,[a(t(ie),{size:16,class:"pulse-anim"})]),e("div",Ps,[s[3]||(s[3]=e("span",{class:"pending-label"},"可转化修为",-1)),e("span",Es,"+"+o(r.value.pendingExp),1)]),a(t(R),{type:"primary",size:"small",loading:t(l).actionLoading,onClick:w},{default:v(()=>[...s[4]||(s[4]=[u("转化",-1)])]),_:1},8,["loading"])])):k.value?(n(),i("div",Rs,[a(t(ae),{size:16}),s[6]||(s[6]=e("span",null,"转化冷却中，请稍后再试",-1))])):(n(),i("div",Is,[a(t(Se),{size:16}),s[5]||(s[5]=e("span",null,"灵气不足，请先收取灵气",-1))])),s[7]||(s[7]=e("div",{class:"description"},[e("p",null,"静室可将灵脉中的灵气转化为修炼点数，提升静室等级可增加转化效率")],-1))]),r.value?.canUpgrade?(n(),i("div",Ds,[s[14]||(s[14]=e("h4",null,"升级静室",-1)),s[15]||(s[15]=e("p",{class:"upgrade-desc"},"提升静室等级，增加灵气转化效率",-1)),e("div",Ns,[e("div",Fs,[s[9]||(s[9]=e("span",{class:"preview-label"},"转化率",-1)),e("span",qs,[u(o(r.value?.conversionRate)+"x ",1),a(t(ne),{size:12}),s[8]||(s[8]=u(" ? ",-1))])]),e("div",Us,[s[11]||(s[11]=e("span",{class:"preview-label"},"转化上限",-1)),e("span",As,[u(o(r.value?.maxConversionPerHour)+" ",1),a(t(ne),{size:12}),s[10]||(s[10]=u(" ? ",-1))])])]),r.value?.upgradeCost?(n(),i("div",Os,[s[12]||(s[12]=e("span",{class:"cost-label"},"升级消耗：",-1)),e("span",Hs,[a(t(K),{size:14}),u(" "+o(r.value.upgradeCost.spiritStones)+" 灵石 ",1)]),(n(!0),i(N,null,F(r.value.upgradeCost.items,f=>(n(),i("span",{key:f.itemId,class:"cost-item"},[a(t(A),{size:14}),u(" "+o(f.quantity)+"x ",1)]))),128))])):b("",!0),a(t(R),{type:"primary",loading:t(l).actionLoading,onClick:p},{icon:v(()=>[a(t(ie),{size:16})]),default:v(()=>[s[13]||(s[13]=u(" 升级静室 ",-1))]),_:1},8,["loading"])])):(n(),i("div",Bs,[a(t(ue),{size:20}),s[16]||(s[16]=e("span",null,"静室已达满级",-1))]))]))}}),js=B(Gs,[["__scopeId","data-v-b812f5ab"]]),Zs={class:"treasure-panel"},Ks={class:"panel-header"},Ws={class:"header-icon"},Xs={class:"display-slots"},Js=["onClick"],Qs={key:0,class:"slot-item"},Ys={class:"item-icon"},et={class:"item-name"},st={key:1,class:"slot-empty"},tt={class:"slot-number"},at={class:"modal-header"},nt={class:"select-modal-content"},it={class:"select-hint"},ot={key:0,class:"loading-items"},lt={key:1,class:"no-items"},rt={key:2,class:"item-list"},ct=["onClick"],dt={class:"item-option-icon"},ut={class:"item-option-info"},vt={class:"item-option-name"},pt={class:"item-option-count"},_t=O({__name:"TreasurePanel",setup(q){const l=Z(),c=H(),r=S(!1),k=S(0),w=S(!1),p=S([]),m=M(()=>l.treasureDisplay),s=T=>m.value.find(z=>z.slot===T),f=M(()=>m.value.map(T=>T.inventoryItemId)),C=M(()=>p.value.filter(T=>!f.value.includes(T.id))),x=async T=>{if(!s(T)){k.value=T,r.value=!0,w.value=!0;try{const{data:z}=await ze.getInventory({pageSize:100});p.value=z.items.map(_=>({id:_.id,itemId:_.itemId,name:_.itemName,quantity:_.quantity}))}catch{c.error("加载背包失败")}finally{w.value=!1}}},h=async T=>{try{await l.displayTreasure(T.id,k.value),c.success(`已将 ${T.name} 放置在展台`),r.value=!1}catch(z){c.error(z.message||"放置失败")}},d=async T=>{try{const z=await l.removeTreasure(T);c.success(`已取下 ${z.itemName}`)}catch(z){c.error(z.message||"取下失败")}};return(T,z)=>(n(),i("div",Zs,[e("div",Ks,[e("div",Ws,[a(t(fe),{size:20})]),z[1]||(z[1]=e("div",{class:"header-info"},[e("h3",null,"万宝阁"),e("p",null,"展示你的珍贵宝物，让来访道友一睹风采")],-1))]),e("div",Xs,[(n(),i(N,null,F(3,_=>e("div",{key:_,class:W(["display-slot",{"has-item":s(_-1)}]),onClick:g=>x(_-1)},[s(_-1)?(n(),i("div",Qs,[e("div",Ys,[a(t(A),{size:24})]),e("span",et,o(s(_-1)?.itemName),1),a(t(R),{size:"tiny",class:"remove-btn",onClick:we(g=>d(_-1),["stop"])},{default:v(()=>[...z[2]||(z[2]=[u("取下",-1)])]),_:1},8,["onClick"])])):(n(),i("div",st,[a(t(Me),{size:24}),z[3]||(z[3]=e("span",null,"点击放置",-1))])),e("span",tt,o(_)+"号展台",1)],10,Js)),64))]),a(t(de),{show:r.value,"onUpdate:show":z[0]||(z[0]=_=>r.value=_),preset:"card",style:{width:"90%","max-width":"400px"}},{header:v(()=>[e("div",at,[a(t(A),{size:18}),z[4]||(z[4]=e("span",null,"选择展示物品",-1))])]),default:v(()=>[e("div",nt,[e("p",it,"选择一件物品放置在 "+o(k.value+1)+" 号展台：",1),w.value?(n(),i("div",ot,[a(t(oe),{size:24,class:"spinning"}),z[5]||(z[5]=e("span",null,"正在加载物品...",-1))])):C.value.length===0?(n(),i("div",lt,[a(t(A),{size:32}),z[6]||(z[6]=e("span",null,"背包中暂无可展示的物品",-1))])):(n(),i("div",rt,[(n(!0),i(N,null,F(C.value,_=>(n(),i("div",{key:_.id,class:"item-option",onClick:g=>h(_)},[e("div",dt,[a(t(A),{size:20})]),e("div",ut,[e("span",vt,o(_.name),1),e("span",pt,"x"+o(_.quantity),1)])],8,ct))),128))]))])]),_:1},8,["show"])]))}}),mt=B(_t,[["__scopeId","data-v-045fba54"]]),yt={class:"scenery-panel"},gt={class:"panel-header"},ft={class:"header-icon"},ht={class:"section"},$t={class:"section-title"},kt={class:"count"},wt={key:0,class:"empty-hint"},zt={key:1,class:"scenery-grid"},Ct=["onClick"],bt={class:"scenery-info"},xt={class:"scenery-name"},St={class:"scenery-desc"},Mt={class:"scenery-status"},Lt={class:"section"},Vt={class:"section-title"},Tt={class:"count"},Pt={key:0,class:"empty-hint"},Et={key:1,class:"scenery-grid locked-grid"},It={class:"scenery-icon locked-icon"},Rt={class:"scenery-info"},Dt={class:"scenery-name"},Nt={class:"scenery-condition"},Ft=O({__name:"SceneryPanel",setup(q){const l=Z(),c=H(),r=M(()=>l.unlockedSceneries),k=M(()=>l.lockedSceneries),w=s=>{switch(s){case"legendary":return"rgba(255, 165, 0, 0.2)";case"epic":return"rgba(163, 53, 238, 0.2)";case"rare":return"rgba(33, 150, 243, 0.2)";default:return"rgba(138, 109, 183, 0.15)"}},p=s=>{switch(s.type){case"realm_reached":return"达到指定境界";case"cave_level":return`洞府总等级达到 ${s.minLevel}`;case"visitor_count":return`接待访客 ${s.minCount} 次`;case"total_exp":return`累计修为达到 ${s.minExp}`;case"pvp_kills":return`PvP击杀 ${s.minCount} 次`;default:return"特殊条件"}},m=async s=>{try{await l.toggleScenery(s),c.success("景观状态已更新")}catch(f){c.error(f.message||"操作失败")}};return Y(()=>{l.fetchSceneryGallery()}),(s,f)=>(n(),i("div",yt,[e("div",gt,[e("div",ft,[a(t($e),{size:20})]),f[0]||(f[0]=e("div",{class:"header-info"},[e("h3",null,"洞天绘卷"),e("p",null,"收集成就景观，装点你的洞府")],-1))]),e("div",ht,[e("h4",$t,[a(t(Le),{size:16}),f[1]||(f[1]=u(" 已解锁 ",-1)),e("span",kt,"("+o(r.value.length)+")",1)]),r.value.length===0?(n(),i("div",wt,"暂未解锁任何景观")):(n(),i("div",zt,[(n(!0),i(N,null,F(r.value,C=>(n(),i("div",{key:C.id,class:W(["scenery-card",{displayed:C.isDisplayed}]),onClick:x=>m(C.id)},[e("div",{class:"scenery-icon",style:ge({background:w(C.rarity)})},[a(t(je),{size:24})],4),e("div",bt,[e("span",xt,o(C.name),1),e("span",St,o(C.description),1)]),e("div",Mt,[C.isDisplayed?(n(),U(t(Ve),{key:0,size:16})):(n(),U(t(Ge),{key:1,size:16}))])],10,Ct))),128))]))]),e("div",Lt,[e("h4",Vt,[a(t(_e),{size:16}),f[2]||(f[2]=u(" 未解锁 ",-1)),e("span",Tt,"("+o(k.value.length)+")",1)]),k.value.length===0?(n(),i("div",Pt,"所有景观已解锁")):(n(),i("div",Et,[(n(!0),i(N,null,F(k.value,C=>(n(),i("div",{key:C.id,class:"scenery-card locked"},[e("div",It,[a(t(_e),{size:24})]),e("div",Rt,[e("span",Dt,o(C.name),1),e("span",Nt,o(p(C.condition)),1)])]))),128))]))])]))}}),qt=B(Ft,[["__scopeId","data-v-29a6ba66"]]),Ut={class:"visitor-panel"},At={key:0,class:"current-visitor"},Ot={class:"visitor-header"},Ht={class:"visitor-icon"},Bt={class:"visitor-info"},Gt={class:"visitor-countdown"},jt={class:"visitor-actions"},Zt={key:1,class:"no-visitor"},Kt={class:"no-visitor-icon"},Wt={class:"visitor-logs"},Xt={class:"section-title"},Jt={key:0,class:"loading-logs"},Qt={key:1,class:"no-logs"},Yt={key:2,class:"logs-list"},ea={class:"log-info"},sa={class:"log-name"},ta={class:"log-action"},aa={key:0,class:"log-result"},na={class:"log-time"},ia={key:3,class:"pagination"},oa={class:"page-info"},la={class:"modal-header"},ra={class:"result-content"},ca={class:"result-desc"},da={key:0,class:"result-rewards"},ua={class:"rewards-list"},va={key:0,class:"reward-item"},pa={key:1,class:"reward-item"},_a={key:1,class:"result-penalty"},ma=O({__name:"VisitorPanel",setup(q){const l=Z(),c=H(),r=S(!1),k=S(1),w=S(!1),p=S(null),m=M(()=>l.currentVisitor),s=M(()=>l.visitorLogs),f=M(()=>l.visitorLogsTotal),C=_=>{const g=Math.floor(_/60),L=_%60;return`${g}:${L.toString().padStart(2,"0")}`},x=_=>{const g=new Date(_);return`${g.getMonth()+1}/${g.getDate()} ${g.getHours()}:${g.getMinutes().toString().padStart(2,"0")}`},h=_=>{switch(_){case"received":return"已接待";case"expelled":return"已驱逐";case"expired":return"已离去";default:return _}},d=async _=>{r.value=!0,k.value=_;try{await l.fetchVisitorLogs(_)}finally{r.value=!1}},T=async()=>{try{const _=await l.receiveVisitor();p.value=_,w.value=!0,d(1)}catch(_){c.error(_.message||"接待失败")}},z=async()=>{try{const _=await l.expelVisitor();p.value=_,w.value=!0,d(1)}catch(_){c.error(_.message||"驱逐失败")}};return Y(()=>{d(1)}),(_,g)=>(n(),i("div",Ut,[t(l).hasVisitor?(n(),i("div",At,[e("div",Ot,[e("div",Ht,[a(t(ce),{size:24,class:"pulse"})]),e("div",Bt,[e("h3",null,o(m.value?.name),1),e("p",null,o(m.value?.description),1)])]),e("div",Gt,[a(t(ae),{size:16}),e("span",null,"剩余时间："+o(C(m.value?.remainingSeconds||0)),1)]),e("div",jt,[a(t(R),{type:"primary",loading:t(l).actionLoading,onClick:T},{icon:v(()=>[a(t(Te),{size:16})]),default:v(()=>[g[3]||(g[3]=u(" 接待访客 ",-1))]),_:1},8,["loading"]),a(t(R),{type:"error",loading:t(l).actionLoading,onClick:z},{icon:v(()=>[a(t(ye),{size:16})]),default:v(()=>[g[4]||(g[4]=u(" 驱逐访客 ",-1))]),_:1},8,["loading"])])])):(n(),i("div",Zt,[e("div",Kt,[a(t(ve),{size:48})]),g[5]||(g[5]=e("h3",null,"暂无访客",-1)),g[6]||(g[6]=e("p",null,"访客会不定时造访你的洞府",-1))])),e("div",Wt,[e("h4",Xt,[a(t(Pe),{size:16}),g[7]||(g[7]=u(" 访客记录 ",-1))]),r.value?(n(),i("div",Jt,[a(t(oe),{size:20,class:"spinning"})])):s.value.length===0?(n(),i("div",Qt,"暂无访客记录")):(n(),i("div",Yt,[(n(!0),i(N,null,F(s.value,L=>(n(),i("div",{key:L.id,class:"log-item"},[e("div",{class:W(["log-icon",L.action])},[L.action==="received"?(n(),U(t(ce),{key:0,size:16})):L.action==="expelled"?(n(),U(t(ye),{key:1,size:16})):(n(),U(t(ae),{key:2,size:16}))],2),e("div",ea,[e("span",sa,o(L.visitorName),1),e("span",ta,o(h(L.action)),1),L.result?.description?(n(),i("span",aa,o(L.result.description),1)):b("",!0)]),e("span",na,o(x(L.visitedAt)),1)]))),128))])),f.value>20?(n(),i("div",ia,[a(t(R),{size:"small",disabled:k.value<=1,onClick:g[0]||(g[0]=L=>d(k.value-1))},{default:v(()=>[...g[8]||(g[8]=[u("上一页",-1)])]),_:1},8,["disabled"]),e("span",oa,o(k.value)+" / "+o(Math.ceil(f.value/20)),1),a(t(R),{size:"small",disabled:k.value>=Math.ceil(f.value/20),onClick:g[1]||(g[1]=L=>d(k.value+1))},{default:v(()=>[...g[9]||(g[9]=[u(" 下一页 ",-1)])]),_:1},8,["disabled"])])):b("",!0)]),a(t(de),{show:w.value,"onUpdate:show":g[2]||(g[2]=L=>w.value=L),preset:"card",style:{width:"90%","max-width":"400px"}},{header:v(()=>[e("div",la,[a(t(j),{size:18}),g[10]||(g[10]=e("span",null,"访客结果",-1))])]),default:v(()=>[e("div",ra,[e("p",ca,o(p.value?.description),1),p.value?.rewards?(n(),i("div",da,[g[11]||(g[11]=e("h4",null,"获得奖励：",-1)),e("div",ua,[p.value.rewards.spiritStones?(n(),i("span",va,[a(t(K),{size:14}),u(" "+o(p.value.rewards.spiritStones)+" 灵石 ",1)])):b("",!0),p.value.rewards.exp?(n(),i("span",pa,[a(t(ie),{size:14}),u(" "+o(p.value.rewards.exp)+" 修为 ",1)])):b("",!0),(n(!0),i(N,null,F(p.value.rewards.items,L=>(n(),i("span",{key:L.itemId,class:"reward-item"},[a(t(A),{size:14}),u(" "+o(L.itemName)+" x"+o(L.quantity),1)]))),128))])])):b("",!0),p.value?.penalties?.debuff?(n(),i("div",_a,[a(t(Ee),{size:16}),g[12]||(g[12]=e("span",null,"获得负面效果",-1))])):b("",!0)])]),_:1},8,["show"])]))}}),ya=B(ma,[["__scopeId","data-v-8670ef67"]]),ga={class:"social-panel"},fa={class:"visit-section"},ha={class:"section-title"},$a={class:"visit-input"},ka={class:"messages-section"},wa={class:"section-title"},za={key:0,class:"unread-badge"},Ca={key:0,class:"loading-messages"},ba={key:1,class:"no-messages"},xa={key:2,class:"messages-list"},Sa=["onClick"],Ma={class:"message-header"},La={class:"message-from"},Va={class:"message-time"},Ta={class:"message-content"},Pa={key:3,class:"pagination"},Ea={class:"page-info"},Ia={class:"modal-header"},Ra={class:"visit-result-content"},Da={class:"visit-levels"},Na={class:"level-item"},Fa={class:"level-item"},qa={key:0,class:"visit-sceneries"},Ua={class:"scenery-tags"},Aa={key:1,class:"visit-treasures"},Oa={class:"treasure-list"},Ha={class:"leave-message"},Ba={class:"visit-stats"},Ga={class:"stat-item"},ja={class:"stat-item"},Za=O({__name:"SocialPanel",setup(q){const l=Z(),c=H(),r=S(""),k=S(!1),w=S(!1),p=S(null),m=S(""),s=S(!1),f=S(!1),C=S(1),x=M(()=>l.messages),h=M(()=>l.messagesTotal),d=M(()=>l.unreadMessagesCount),T=D=>{const $=new Date(D),E=new Date().getTime()-$.getTime();return E<6e4?"刚刚":E<36e5?`${Math.floor(E/6e4)} 分钟前`:E<864e5?`${Math.floor(E/36e5)} 小时前`:`${$.getMonth()+1}/${$.getDate()}`},z=async D=>{f.value=!0,C.value=D;try{await l.fetchMessages(D)}finally{f.value=!1}},_=async()=>{if(r.value.trim()){k.value=!0;try{const D=await l.visitCave(r.value.trim());p.value=D,m.value="",w.value=!0}catch(D){c.error(D.message||"拜访失败")}finally{k.value=!1}}},g=async()=>{if(!(!m.value.trim()||!p.value)){s.value=!0;try{await l.leaveMessage(p.value.ownerName,m.value.trim()),c.success("留言成功"),m.value=""}catch(D){c.error(D.message||"留言失败")}finally{s.value=!1}}},L=async D=>{D.isRead||await l.markMessageRead(D.id)};return Y(()=>{z(1)}),(D,$)=>(n(),i("div",ga,[e("div",fa,[e("h4",ha,[a(t(Ie),{size:16}),$[5]||($[5]=u(" 拜访洞府 ",-1))]),e("div",$a,[a(t(me),{value:r.value,"onUpdate:value":$[0]||($[0]=V=>r.value=V),placeholder:"输入道号",onKeyup:Ce(_,["enter"])},null,8,["value"]),a(t(R),{type:"primary",loading:k.value,disabled:!r.value.trim(),onClick:_},{default:v(()=>[...$[6]||($[6]=[u("拜访",-1)])]),_:1},8,["loading","disabled"])])]),e("div",ka,[e("h4",wa,[a(t(re),{size:16}),$[7]||($[7]=u(" 留言板 ",-1)),d.value>0?(n(),i("span",za,o(d.value),1)):b("",!0)]),f.value?(n(),i("div",Ca,[a(t(oe),{size:20,class:"spinning"})])):x.value.length===0?(n(),i("div",ba,"暂无留言")):(n(),i("div",xa,[(n(!0),i(N,null,F(x.value,V=>(n(),i("div",{key:V.id,class:W(["message-item",{unread:!V.isRead}]),onClick:E=>L(V)},[e("div",Ma,[e("span",La,o(V.visitorName),1),e("span",Va,o(T(V.createdAt)),1)]),e("p",Ta,o(V.content),1)],10,Sa))),128))])),h.value>10?(n(),i("div",Pa,[a(t(R),{size:"small",disabled:C.value<=1,onClick:$[1]||($[1]=V=>z(C.value-1))},{default:v(()=>[...$[8]||($[8]=[u("上一页",-1)])]),_:1},8,["disabled"]),e("span",Ea,o(C.value)+" / "+o(Math.ceil(h.value/10)),1),a(t(R),{size:"small",disabled:C.value>=Math.ceil(h.value/10),onClick:$[2]||($[2]=V=>z(C.value+1))},{default:v(()=>[...$[9]||($[9]=[u(" 下一页 ",-1)])]),_:1},8,["disabled"])])):b("",!0)]),a(t(de),{show:w.value,"onUpdate:show":$[4]||($[4]=V=>w.value=V),preset:"card",style:{width:"90%","max-width":"450px"}},{header:v(()=>[e("div",Ia,[a(t(te),{size:18}),e("span",null,o(p.value?.ownerName)+" 的洞府",1)])]),default:v(()=>[e("div",Ra,[e("div",Da,[e("div",Na,[a(t(Q),{size:16}),e("span",null,"灵脉 Lv."+o(p.value?.spiritVeinLevel),1)]),e("div",Fa,[a(t(j),{size:16}),e("span",null,"静室 Lv."+o(p.value?.meditationChamberLevel),1)])]),p.value?.displayedSceneries?.length?(n(),i("div",qa,[$[10]||($[10]=e("h4",null,"洞天绘卷",-1)),e("div",Ua,[(n(!0),i(N,null,F(p.value.displayedSceneries,V=>(n(),i("span",{key:V.id,class:"scenery-tag"},o(V.name),1))),128))])])):b("",!0),p.value?.treasureDisplay?.length?(n(),i("div",Aa,[$[11]||($[11]=e("h4",null,"万宝阁",-1)),e("div",Oa,[(n(!0),i(N,null,F(p.value.treasureDisplay,V=>(n(),i("div",{key:V.slot,class:"treasure-item"},[a(t(A),{size:14}),e("span",null,o(V.itemName),1)]))),128))])])):b("",!0),e("div",Ha,[$[13]||($[13]=e("h4",null,"留下足迹",-1)),a(t(me),{value:m.value,"onUpdate:value":$[3]||($[3]=V=>m.value=V),type:"textarea",placeholder:"写下你的留言...",maxlength:100,"show-count":""},null,8,["value"]),a(t(R),{type:"primary",loading:s.value,disabled:!m.value.trim(),onClick:g},{default:v(()=>[...$[12]||($[12]=[u("留言",-1)])]),_:1},8,["loading","disabled"])]),e("div",Ba,[e("span",Ga,[a(t(ve),{size:14}),u(" "+o(p.value?.stats?.totalPlayerVisits||0)+" 次拜访 ",1)]),e("span",ja,[a(t(re),{size:14}),u(" "+o(p.value?.stats?.totalGuestMessages||0)+" 条留言 ",1)])])])]),_:1},8,["show"])]))}}),Ka=B(Za,[["__scopeId","data-v-febd55c3"]]),Wa={class:"formation-panel"},Xa={key:0,class:"active-formation"},Ja={class:"active-header"},Qa={class:"active-card"},Ya={class:"formation-name"},en={class:"formation-tier"},sn={class:"formation-effects"},tn={key:0,class:"effect-item"},an={key:1,class:"effect-item"},nn={key:2,class:"effect-item"},on={key:3,class:"effect-item"},ln={class:"remaining-time"},rn={key:1,class:"no-formation"},cn={class:"section"},dn={key:0,class:"empty-section"},un={key:1,class:"formation-list"},vn={class:"card-header"},pn={class:"formation-name"},_n={class:"formation-tier"},mn={class:"formation-desc"},yn={class:"formation-effects"},gn={key:0,class:"effect-tag"},fn={key:1,class:"effect-tag"},hn={key:2,class:"effect-tag"},$n={key:3,class:"effect-tag"},kn={class:"card-footer"},wn={class:"activation-cost"},zn={key:1,class:"cannot-activate"},Cn={class:"section"},bn={key:0,class:"empty-section"},xn={key:1,class:"formation-list"},Sn={class:"card-header"},Mn={class:"formation-name"},Ln={class:"formation-tier"},Vn={class:"formation-desc"},Tn={class:"formation-effects"},Pn={key:0,class:"effect-tag"},En={key:1,class:"effect-tag"},In={key:2,class:"effect-tag"},Rn={key:3,class:"effect-tag"},Dn={class:"card-footer"},Nn={class:"learn-cost"},Fn={key:1,class:"realm-requirement"},qn=O({__name:"FormationPanel",setup(q){const l=H(),c=S(null),r=["炼气期","筑基期","结丹期","元婴期","化神期","炼虚期","合体期","大乘期","渡劫期"],k=x=>r[x-1]||`${x}阶`,w=x=>{if(x<=0)return"已过期";const h=Math.floor(x/(1e3*60*60)),d=Math.floor(x%(1e3*60*60)/(1e3*60));return h>0?`${h}小时${d}分`:`${d}分钟`},p=async()=>{try{const x=await ee.getStatus();c.value=x.data}catch(x){l.error(se(x,"获取阵法状态失败"))}},m=async x=>{try{const h=await ee.learn(x);l.success(h.data.message),await p()}catch(h){l.error(se(h,"学习失败"))}},s=async x=>{try{const h=await ee.activate(x);l.success(h.data.message),await p()}catch(h){l.error(se(h,"激活失败"))}},f=async()=>{try{const x=await ee.deactivate();l.success(x.data.message),await p()}catch(x){l.error(se(x,"撤阵失败"))}};let C=null;return Y(async()=>{await p(),C=setInterval(()=>{c.value?.activeFormation&&c.value.activeFormation.remainingTime>0&&(c.value.activeFormation.remainingTime-=1e3,c.value.activeFormation.remainingTime<=0&&p())},1e3)}),be(()=>{C&&clearInterval(C)}),(x,h)=>(n(),i("div",Wa,[c.value?.activeFormation?(n(),i("div",Xa,[e("div",Ja,[a(t(Re),{size:18}),h[0]||(h[0]=e("span",null,"护府阵法",-1))]),e("div",Qa,[e("div",Ya,o(c.value.activeFormation.name),1),e("div",en,o(c.value.activeFormation.tierName),1),e("div",sn,[c.value.activeFormation.effects.damageReduction?(n(),i("div",tn,[a(t(De),{size:14}),e("span",null,"减伤 "+o(c.value.activeFormation.effects.damageReduction)+"%",1)])):b("",!0),c.value.activeFormation.effects.reflectDamage?(n(),i("div",an,[a(t(Ne),{size:14}),e("span",null,"反伤 "+o(c.value.activeFormation.effects.reflectDamage)+"%",1)])):b("",!0),c.value.activeFormation.effects.dodgeChance?(n(),i("div",nn,[a(t(qe),{size:14}),e("span",null,"闪避 "+o(c.value.activeFormation.effects.dodgeChance)+"%",1)])):b("",!0),c.value.activeFormation.effects.counterAttack?(n(),i("div",on,[a(t(Q),{size:14}),e("span",null,"反击 "+o(c.value.activeFormation.effects.counterAttack)+"%",1)])):b("",!0)]),e("div",ln,[a(t(Ue),{size:14}),e("span",null,"剩余 "+o(w(c.value.activeFormation.remainingTime)),1)]),a(t(R),{type:"error",size:"small",onClick:f},{icon:v(()=>[a(t(he),{size:14})]),default:v(()=>[h[1]||(h[1]=u(" 撤阵 ",-1))]),_:1})])])):(n(),i("div",rn,[a(t(Ae),{size:32}),h[2]||(h[2]=e("p",null,"洞府未布置防护阵法",-1))])),e("div",cn,[e("h3",null,[a(t(Oe),{size:16}),h[3]||(h[3]=u(" 已习阵法 ",-1))]),c.value?.learnedFormations?.length?(n(),i("div",un,[(n(!0),i(N,null,F(c.value.learnedFormations,d=>(n(),i("div",{key:d.id,class:"formation-card learned"},[e("div",vn,[e("span",pn,o(d.name),1),e("span",_n,o(d.tierName),1)]),e("p",mn,o(d.description),1),e("div",yn,[d.effects.damageReduction?(n(),i("span",gn,"减伤"+o(d.effects.damageReduction)+"%",1)):b("",!0),d.effects.reflectDamage?(n(),i("span",fn,"反伤"+o(d.effects.reflectDamage)+"%",1)):b("",!0),d.effects.dodgeChance?(n(),i("span",hn,"闪避"+o(d.effects.dodgeChance)+"%",1)):b("",!0),d.effects.counterAttack?(n(),i("span",$n,"反击"+o(d.effects.counterAttack)+"%",1)):b("",!0)]),e("div",kn,[e("div",wn,[a(t(K),{size:12}),u(" "+o(d.activationCost.spiritStones)+" ",1),a(t(j),{size:12}),u(" "+o(d.activationCost.cultivation),1)]),d.canActivate?(n(),U(t(R),{key:0,type:"primary",size:"small",onClick:T=>s(d.id)},{default:v(()=>[...h[4]||(h[4]=[u("布阵",-1)])]),_:1},8,["onClick"])):(n(),i("span",zn,"已激活其他阵法"))])]))),128))])):(n(),i("div",dn,"尚未习得任何阵法"))]),e("div",Cn,[e("h3",null,[a(t(Fe),{size:16}),h[5]||(h[5]=u(" 可习阵法 ",-1))]),c.value?.availableFormations?.length?(n(),i("div",xn,[(n(!0),i(N,null,F(c.value.availableFormations,d=>(n(),i("div",{key:d.id,class:W(["formation-card available",{"can-learn":d.canLearn}])},[e("div",Sn,[e("span",Mn,o(d.name),1),e("span",Ln,o(d.tierName),1)]),e("p",Vn,o(d.description),1),e("div",Tn,[d.effects.damageReduction?(n(),i("span",Pn,"减伤"+o(d.effects.damageReduction)+"%",1)):b("",!0),d.effects.reflectDamage?(n(),i("span",En,"反伤"+o(d.effects.reflectDamage)+"%",1)):b("",!0),d.effects.dodgeChance?(n(),i("span",In,"闪避"+o(d.effects.dodgeChance)+"%",1)):b("",!0),d.effects.counterAttack?(n(),i("span",Rn,"反击"+o(d.effects.counterAttack)+"%",1)):b("",!0)]),e("div",Dn,[e("div",Nn,[a(t(K),{size:12}),u(" "+o(d.learnCost.spiritStones),1)]),d.canLearn?(n(),U(t(R),{key:0,type:"primary",size:"small",onClick:T=>m(d.id)},{default:v(()=>[...h[6]||(h[6]=[u("习得",-1)])]),_:1},8,["onClick"])):(n(),i("span",Fn,"需 "+o(k(d.requiredRealmTier)),1))])],2))),128))])):(n(),i("div",bn,"暂无可学习的阵法"))])]))}}),Un=B(qn,[["__scopeId","data-v-0d851f63"]]),An={class:"cave-dwelling-page"},On={key:0,class:"loading-state"},Hn={key:1,class:"no-cave"},Bn={class:"no-cave-icon"},Gn={key:0,class:"open-requirements"},jn={class:"requirement-list"},Zn={class:"requirement-item"},Kn={class:"requirement-item"},Wn={key:0,class:"cannot-open-reason"},Xn={class:"cave-particles"},Jn={class:"cave-header"},Qn={class:"header-left"},Yn={class:"cave-icon-wrapper"},ei={class:"header-info"},si={class:"header-meta"},ti={class:"level-info"},ai={class:"level-info"},ni={class:"header-actions"},ii={class:"tab-label"},oi={class:"tab-content"},li={class:"tab-label"},ri={class:"tab-content"},ci={class:"tab-label"},di={class:"tab-content"},ui={class:"tab-label"},vi={class:"tab-content"},pi={class:"tab-label"},_i={key:0,class:"tab-badge"},mi={class:"tab-content"},yi={class:"tab-label"},gi={key:0,class:"tab-badge"},fi={class:"tab-content"},hi={class:"tab-label"},$i={class:"tab-content"},ki=O({__name:"CaveDwelling",setup(q){const l=Z(),c=H(),r=S(!0),k=S("spirit"),w=S(null),p=async()=>{try{await l.openCave(),c.success("洞府开辟成功！")}catch(m){c.error(m.message||"开辟失败")}};return Y(async()=>{try{await l.initialize(),l.hasCave||(w.value=await l.checkCanOpen())}finally{r.value=!1}}),(m,s)=>(n(),i("div",An,[r.value?(n(),i("div",On,[a(t(oe),{size:32,class:"spinning"}),s[2]||(s[2]=e("span",null,"正在查看洞府...",-1))])):t(l).hasCave?(n(),i(N,{key:2},[e("div",Xn,[(n(),i(N,null,F(10,f=>e("div",{key:f,class:"particle",style:ge({"--delay":f*.6+"s","--x":Math.random()*100+"%"})},null,4)),64))]),e("div",Jn,[s[13]||(s[13]=e("div",{class:"header-glow"},null,-1)),e("div",Qn,[e("div",Yn,[s[10]||(s[10]=e("div",{class:"icon-glow"},null,-1)),a(t(te),{size:24,class:"cave-icon"})]),e("div",ei,[s[11]||(s[11]=e("h1",null,"洞天福地",-1)),e("div",si,[e("span",ti,[a(t(Q),{size:12}),u(" 灵脉 Lv."+o(t(l).spiritVein?.level),1)]),e("span",ai,[a(t(j),{size:12}),u(" 静室 Lv."+o(t(l).meditationChamber?.level),1)])])])]),e("div",ni,[t(l).hasVisitor?(n(),U(t(R),{key:0,type:"warning",size:"small",onClick:s[0]||(s[0]=f=>k.value="visitor")},{icon:v(()=>[a(t(ce),{size:14})]),default:v(()=>[s[12]||(s[12]=u(" 有访客 ",-1))]),_:1})):b("",!0)])]),a(t(Be),{value:k.value,"onUpdate:value":s[1]||(s[1]=f=>k.value=f),type:"segment",animated:"",class:"cave-tabs"},{default:v(()=>[a(t(G),{name:"spirit"},{tab:v(()=>[e("div",ii,[a(t(Q),{size:14}),s[14]||(s[14]=e("span",null,"灵脉",-1))])]),default:v(()=>[e("div",oi,[a(fs)])]),_:1}),a(t(G),{name:"meditation"},{tab:v(()=>[e("div",li,[a(t(j),{size:14}),s[15]||(s[15]=e("span",null,"静室",-1))])]),default:v(()=>[e("div",ri,[a(js)])]),_:1}),a(t(G),{name:"treasure"},{tab:v(()=>[e("div",ci,[a(t(fe),{size:14}),s[16]||(s[16]=e("span",null,"万宝阁",-1))])]),default:v(()=>[e("div",di,[a(mt)])]),_:1}),a(t(G),{name:"scenery"},{tab:v(()=>[e("div",ui,[a(t($e),{size:14}),s[17]||(s[17]=e("span",null,"绘卷",-1))])]),default:v(()=>[e("div",vi,[a(qt)])]),_:1}),a(t(G),{name:"visitor"},{tab:v(()=>[e("div",pi,[a(t(ve),{size:14}),s[18]||(s[18]=e("span",null,"访客",-1)),t(l).hasVisitor?(n(),i("span",_i,"!")):b("",!0)])]),default:v(()=>[e("div",mi,[a(ya)])]),_:1}),a(t(G),{name:"social"},{tab:v(()=>[e("div",yi,[a(t(re),{size:14}),s[19]||(s[19]=e("span",null,"社交",-1)),t(l).unreadMessagesCount>0?(n(),i("span",gi,o(t(l).unreadMessagesCount),1)):b("",!0)])]),default:v(()=>[e("div",fi,[a(Ka)])]),_:1}),a(t(G),{name:"formation"},{tab:v(()=>[e("div",hi,[a(t(He),{size:14}),s[20]||(s[20]=e("span",null,"阵法",-1))])]),default:v(()=>[e("div",$i,[a(Un)])]),_:1})]),_:1},8,["value"])],64)):(n(),i("div",Hn,[e("div",Bn,[a(t(te),{size:64})]),s[8]||(s[8]=e("h2",null,"尚未开辟洞府",-1)),s[9]||(s[9]=e("p",null,"开辟一处洞天福地，作为修炼栖身之所",-1)),w.value?(n(),i("div",Gn,[s[7]||(s[7]=e("h3",null,"开辟条件",-1)),e("div",jn,[e("div",{class:W(["requirement-item",{met:w.value.canOpen}])},[w.value.canOpen?(n(),U(t(ue),{key:0,size:16})):(n(),U(t(he),{key:1,size:16})),s[3]||(s[3]=e("span",null,"境界：筑基初期",-1))],2),e("div",Zn,[a(t(K),{size:16}),s[4]||(s[4]=e("span",null,"500 灵石",-1))]),e("div",Kn,[a(t(A),{size:16}),s[5]||(s[5]=e("span",null,"二阶妖丹 x5",-1))])]),a(t(R),{type:"primary",size:"large",disabled:!w.value.canOpen,loading:t(l).actionLoading,onClick:p},{icon:v(()=>[a(t(te),{size:18})]),default:v(()=>[s[6]||(s[6]=u(" 开辟洞府 ",-1))]),_:1},8,["disabled","loading"]),w.value.canOpen?b("",!0):(n(),i("p",Wn,o(w.value.reason),1))])):b("",!0)]))]))}}),xo=B(ki,[["__scopeId","data-v-0e4dc176"]]);export{xo as default};
