import{e as rs,ad as As,f as A,N as w,S as ds,c,g as e,d as i,a as s,F as k,p as m,Z as l,q as $,j as g,s as S,n as C,ae as Z,o,ac as Bs,X as Rs,af as Ts,x as Ns,w as f,r as xs,l as Ps,a1 as qs,a4 as J,B as ss,h as Ds}from"./index-DA11XDlS.js";import{L as Ls}from"./loader-circle-BnoPFgCr.js";import{C as us}from"./crown-CTywvOnR.js";import{T as Us}from"./triangle-alert-vQJa5xBQ.js";import{M as Es}from"./mail-yGaIrlDf.js";import{C as Y}from"./check-Dvn_Mgz0.js";import{c as F}from"./createLucideIcon-DiiZaxVK.js";import{X as E}from"./x-DGyACQy4.js";import{S as Q}from"./swords-bfqjVPqN.js";import{H as P}from"./heart-LgXo-eep.js";import{S as Fs}from"./settings-BMT3I3mR.js";import{I as Hs}from"./info-qMNw81gd.js";import{u as ms}from"./use-message--i6DiThE.js";import{N as Os,C as Qs}from"./chevron-left-DzsXtU2s.js";import{_ as ps}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{B as Vs}from"./building-2-BYTMGtPh.js";import{S as U}from"./sparkles-tsZM6BNv.js";import{L as js}from"./log-out-DPfR_OdR.js";import{S as es}from"./sun-CivYJ-dd.js";import{S as Gs}from"./sword-BlVHvUf1.js";import{S as ts}from"./skull-BAbr3491.js";import{R as as}from"./rabbit-CSDpokCM.js";import{S as V}from"./star-D9p6u3Oh.js";import{L as Ws}from"./leaf-CVdWMOfX.js";import{U as Xs}from"./user-plus-D5P68FjT.js";import{F as Ys}from"./flame-DuW_991e.js";import{C as j}from"./coins-Ks2rpWqM.js";import{B as Ks}from"./book-open-B-z3oi1Q.js";import{T as Zs}from"./trending-up-BXfb3B-f.js";import{S as Js}from"./sprout-Dj0E8u8v.js";import{C as M}from"./chevron-right-BzVHn-hR.js";import{R as se}from"./refresh-cw-5h0-qbhL.js";import{U as ee}from"./user-CXIJJnqr.js";import{U as ns}from"./users-DzD0wEV-.js";import{C as te}from"./clock-Bnzg_83l.js";import{A as G}from"./award-B0i9BiiK.js";import{T as W}from"./target-CxCFSND-.js";import{P as is}from"./package-CRVIogFf.js";import{N as ae,b as x}from"./Tabs-CdCqfdBl.js";import{_ as ne}from"./InputNumber-tuzvZVlG.js";import"./next-frame-once-C5Ksf8W7.js";import"./Input-DOOhwlQ-.js";import"./use-locale-EBm6emhn.js";import"./use-merged-state-DvdMjKiF.js";import"./Tag-D90sLFiK.js";import"./get-DlSqnTrT.js";import"./format-length-B-p6aW7q.js";import"./use-compitable-BnEdbODL.js";import"./Add-C6IKdIGC.js";const os=F("calendar-check",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);const K=F("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const ls=F("hand-coins",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]]);const X=F("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),ie={class:"diplomacy-panel"},oe={key:0,class:"loading-state"},le={class:"master-card"},ce={class:"master-header"},re={class:"master-content"},de={key:0,class:"master-info"},ue={class:"master-name"},me={key:0,class:"master-badge"},pe={key:1,class:"no-master"},ve={key:0,class:"master-hint"},fe={key:0,class:"penalty-warning"},_e={key:1,class:"alliance-requests"},ye={class:"section-title"},he={class:"badge"},ge={class:"request-list"},be={class:"request-info"},ke={class:"from-sect"},Ce={class:"expires"},Se={class:"request-actions"},we=["onClick"],$e={class:"relations-section"},ze={class:"section-title"},Ie={key:0,class:"relation-group"},Me={class:"group-header allied"},Ae={class:"relation-list"},Be={class:"sect-name"},Re=["disabled","onClick","title"],Te={key:1,class:"relation-group"},Ne={class:"group-header hostile"},xe={class:"relation-list"},Pe={class:"sect-name"},qe=["disabled","onClick","title"],De={key:2,class:"relation-group"},Le={class:"group-header friendly"},Ue={class:"relation-list"},Ee={class:"sect-name"},Fe=["disabled","onClick","title"],He={key:3,class:"no-relations"},Oe={key:2,class:"diplomacy-actions"},Qe={class:"section-title"},Ve={class:"action-form"},je={key:0,class:"current-status"},Ge={key:1,class:"action-buttons"},We=["disabled"],Xe=["disabled"],Ye=["disabled","title"],Ke={class:"effects-section"},Ze={class:"section-title"},Je={class:"effects-list"},st={class:"effect-item allied"},et={class:"effect-item hostile"},tt={class:"effect-item friendly"},at=rs({__name:"DiplomacyPanel",setup(vs){const u=As(),a=ms(),h=A(null),_=w(()=>u.otherSects.map(v=>({label:v.name,value:v.id}))),b=w(()=>h.value&&u.getRelationWith(h.value)?.status||"neutral"),B=v=>Z[v]?.color||"#9ca3af",q=v=>Z[v]?.name||"中立",y=v=>{const r=Math.floor(v/6e4);return r<60?`${r}分钟`:`${Math.floor(r/60)}小时${r%60}分钟`},z=async()=>{if(!h.value)return;const v=await u.setFriendly(h.value);v.success?a.success(v.message):a.error(v.message)},R=async()=>{if(!h.value)return;const v=await u.setHostile(h.value);v.success?a.success(v.message):a.error(v.message)},H=async()=>{if(!h.value)return;const v=await u.proposeAlliance(h.value);v.success?a.success(v.message):a.error(v.message)},D=async v=>{const r=await u.acceptAlliance(v);r.success?a.success(r.message):a.error(r.message)},T=async v=>{const r=await u.cancelRelation(v);r.success?a.success(r.message):a.error(r.message)};return ds(()=>{u.init()}),(v,r)=>(o(),c("div",ie,[e(u).loading?(o(),c("div",oe,[i(e(Ls),{size:24,class:"spinning"}),r[1]||(r[1]=s("span",null,"加载中...",-1))])):(o(),c(k,{key:1},[s("div",le,[s("div",ce,[i(e(us),{size:18}),r[2]||(r[2]=s("span",null,"本宗掌门",-1))]),s("div",re,[e(u).masterName?(o(),c("div",de,[s("span",ue,l(e(u).masterName),1),e(u).isMaster?(o(),c("span",me,"（你）")):m("",!0)])):(o(),c("div",pe,"暂无掌门"))]),e(u).isMaster?m("",!0):(o(),c("div",ve,"只有掌门才能进行外交操作"))]),e(u).isInAlliancePenalty?(o(),c("div",fe,[i(e(Us),{size:16}),s("span",null,"背盟惩罚中，剩余 "+l(e(u).alliancePenaltyRemaining),1)])):m("",!0),e(u).pendingAllianceRequests.length>0&&e(u).isMaster?(o(),c("div",_e,[s("h3",ye,[i(e(Es),{size:16}),r[3]||(r[3]=s("span",null,"待处理的结盟请求",-1)),s("span",he,l(e(u).pendingAllianceRequests.length),1)]),s("div",ge,[(o(!0),c(k,null,$(e(u).pendingAllianceRequests,p=>(o(),c("div",{key:p.fromSectId,class:"request-item"},[s("div",be,[s("span",ke,l(p.fromSectName),1),s("span",Ce,l(y(p.remainingMs))+" 后过期",1)]),s("div",Se,[s("button",{class:"accept-btn",onClick:N=>D(p.fromSectId)},[i(e(Y),{size:14}),r[4]||(r[4]=g(" 接受 ",-1))],8,we)])]))),128))])])):m("",!0),s("div",$e,[s("h3",ze,[i(e(K),{size:16}),r[5]||(r[5]=s("span",null,"外交关系",-1))]),e(u).allies.length>0?(o(),c("div",Ie,[s("div",Me,[i(e(X),{size:14}),r[6]||(r[6]=s("span",null,"盟友",-1))]),s("div",Ae,[(o(!0),c(k,null,$(e(u).allies,p=>(o(),c("div",{key:p.sectId,class:"relation-item allied"},[s("span",Be,l(p.sectName),1),e(u).isMaster?(o(),c("button",{key:0,class:"cancel-btn",disabled:!p.canChange,onClick:N=>T(p.sectId),title:p.canChange?"解除同盟":`冷却中 ${e(u).formatCooldown(p.cooldownRemainingMs)}`},[i(e(E),{size:12})],8,Re)):m("",!0)]))),128))])])):m("",!0),e(u).enemies.length>0?(o(),c("div",Te,[s("div",Ne,[i(e(Q),{size:14}),r[7]||(r[7]=s("span",null,"敌对",-1))]),s("div",xe,[(o(!0),c(k,null,$(e(u).enemies,p=>(o(),c("div",{key:p.sectId,class:"relation-item hostile"},[s("span",Pe,l(p.sectName),1),e(u).isMaster?(o(),c("button",{key:0,class:"cancel-btn",disabled:!p.canChange,onClick:N=>T(p.sectId),title:p.canChange?"解除敌对":`冷却中 ${e(u).formatCooldown(p.cooldownRemainingMs)}`},[i(e(E),{size:12})],8,qe)):m("",!0)]))),128))])])):m("",!0),e(u).friends.length>0?(o(),c("div",De,[s("div",Le,[i(e(P),{size:14}),r[8]||(r[8]=s("span",null,"友好",-1))]),s("div",Ue,[(o(!0),c(k,null,$(e(u).friends,p=>(o(),c("div",{key:p.sectId,class:"relation-item friendly"},[s("span",Ee,l(p.sectName),1),e(u).isMaster?(o(),c("button",{key:0,class:"cancel-btn",disabled:!p.canChange,onClick:N=>T(p.sectId),title:p.canChange?"解除友好":`冷却中 ${e(u).formatCooldown(p.cooldownRemainingMs)}`},[i(e(E),{size:12})],8,Fe)):m("",!0)]))),128))])])):m("",!0),e(u).allies.length===0&&e(u).enemies.length===0&&e(u).friends.length===0?(o(),c("div",He,[i(e(K),{size:24}),r[9]||(r[9]=s("span",null,"暂无特殊外交关系",-1))])):m("",!0)]),e(u).isMaster?(o(),c("div",Oe,[s("h3",Qe,[i(e(Fs),{size:16}),r[10]||(r[10]=s("span",null,"外交操作",-1))]),s("div",Ve,[i(e(Os),{value:h.value,"onUpdate:value":r[0]||(r[0]=p=>h.value=p),options:_.value,placeholder:"选择目标宗门",class:"sect-select"},null,8,["value","options"]),h.value?(o(),c("div",je,[r[11]||(r[11]=s("span",null,"当前关系：",-1)),s("span",{class:C(["status-tag",b.value]),style:S({color:B(b.value)})},l(q(b.value)),7)])):m("",!0),h.value?(o(),c("div",Ge,[s("button",{class:"action-btn friendly",disabled:b.value==="friendly"||b.value==="allied",onClick:z},[i(e(P),{size:14}),r[12]||(r[12]=s("span",null,"示好",-1))],8,We),s("button",{class:"action-btn hostile",disabled:b.value==="hostile",onClick:R},[i(e(Q),{size:14}),r[13]||(r[13]=s("span",null,"敌对",-1))],8,Xe),s("button",{class:"action-btn allied",disabled:b.value!=="friendly"||e(u).isInAlliancePenalty,onClick:H,title:b.value!=="friendly"?"需先设为友好":e(u).isInAlliancePenalty?"背盟惩罚中":"发起结盟"},[i(e(X),{size:14}),r[14]||(r[14]=s("span",null,"结盟",-1))],8,Ye)])):m("",!0)])])):m("",!0),s("div",Ke,[s("h3",Ze,[i(e(Hs),{size:16}),r[15]||(r[15]=s("span",null,"外交效果",-1))]),s("div",Je,[s("div",st,[i(e(X),{size:14}),r[16]||(r[16]=s("span",{class:"effect-name"},"结盟",-1)),r[17]||(r[17]=s("span",{class:"effect-desc"},"斗法时战力+5%",-1))]),s("div",et,[i(e(Q),{size:14}),r[18]||(r[18]=s("span",{class:"effect-name"},"敌对",-1)),r[19]||(r[19]=s("span",{class:"effect-desc"},"额外夺取15%修为/贡献",-1))]),s("div",tt,[i(e(P),{size:14}),r[20]||(r[20]=s("span",{class:"effect-name"},"友好",-1)),r[21]||(r[21]=s("span",{class:"effect-desc"},"掠夺量-5%",-1))])])])],64))]))}}),nt=ps(at,[["__scopeId","data-v-41764f04"]]),it={class:"my-sect-page"},ot={key:0,class:"no-sect"},lt={class:"no-sect-icon"},ct={class:"banner-content"},rt={class:"sect-emblem"},dt={class:"sect-info"},ut={class:"sect-name"},mt={class:"sect-meta"},pt={class:"rank-tag"},vt={class:"tab-label"},ft={class:"tab-content"},_t={class:"daily-cards"},yt={class:"daily-card checkin-card"},ht={class:"daily-header"},gt={class:"streak-badge"},bt=["disabled"],kt={class:"daily-card salary-card"},Ct={class:"daily-header"},St={class:"salary-amount"},wt=["disabled"],$t={class:"daily-card teach-card"},zt={class:"daily-header"},It={class:"teach-count-badge"},Mt=["disabled"],At={class:"status-row"},Bt={class:"status-card"},Rt={class:"status-value rank-value"},Tt={class:"status-sub"},Nt={class:"status-card"},xt={class:"status-value contrib-value"},Pt={key:0,class:"status-sub"},qt={key:0,class:"promotion-card"},Dt={class:"promotion-header"},Lt={class:"progress-text"},Ut={class:"progress-bar"},Et=["disabled"],Ft={key:1,class:"max-rank-card"},Ht={key:2,class:"sect-special-feature"},Ot={class:"feature-icon"},Qt={key:3,class:"sect-special-feature"},Vt={class:"feature-icon taiyi-icon"},jt={key:4,class:"sect-special-feature"},Gt={class:"feature-icon heisha-icon"},Wt={key:5,class:"sect-special-feature"},Xt={class:"feature-icon wanling-icon"},Yt={key:6,class:"sect-special-feature"},Kt={class:"feature-icon hehuan-icon"},Zt={class:"tab-label"},Jt={class:"tab-content"},sa={class:"section-header"},ea={class:"member-count"},ta=["disabled"],aa={class:"members-list"},na={class:"member-avatar"},ia={class:"member-info"},oa={class:"member-name"},la={class:"member-rank"},ca={class:"member-realm"},ra={key:0,class:"no-members"},da={key:0,class:"pagination"},ua=["disabled"],ma={class:"page-info"},pa=["disabled"],va={class:"tab-label"},fa={class:"tab-content"},_a={key:0,class:"active-bounties"},ya={class:"bounty-subtitle"},ha={class:"bounty-list"},ga={class:"bounty-header"},ba={class:"bounty-name"},ka={class:"bounty-desc"},Ca={class:"bounty-progress"},Sa={class:"progress-bar"},wa={class:"progress-text"},$a={class:"bounty-rewards"},za={class:"reward-item"},Ia={key:0,class:"reward-item"},Ma=["onClick"],Aa={class:"bounty-subtitle"},Ba={class:"bounty-list"},Ra={class:"bounty-header"},Ta={class:"bounty-name"},Na={class:"bounty-desc"},xa={class:"bounty-rewards"},Pa={class:"reward-item"},qa={key:0,class:"reward-item"},Da=["disabled","onClick"],La={class:"bounty-header"},Ua={class:"completed-tag"},Ea={class:"bounty-name"},Fa={class:"bounty-desc"},Ha={key:1,class:"no-bounties"},Oa={class:"tab-label"},Qa={class:"tab-content"},Va={class:"donate-card"},ja={class:"donate-header"},Ga={class:"donate-input-row"},Wa={key:0,class:"donate-preview"},Xa=["disabled"],Ya={class:"treasury-section"},Ka={class:"treasury-title"},Za={class:"treasury-list"},Ja={class:"item-left"},sn={class:"item-main"},en={class:"item-name-row"},tn={class:"item-desc-compact"},an={class:"item-tags"},nn={key:0,class:"item-effect-tag"},on={key:1,class:"item-limit-tag"},ln={key:2,class:"item-limit-tag"},cn={class:"item-right"},rn={class:"item-cost-compact"},dn=["disabled","onClick"],un={class:"tab-label"},mn={class:"tab-content"},pn={class:"features-modal-header"},vn={class:"features-modal-content"},fn={class:"feature-modal-name"},_n={class:"feature-modal-desc"},yn={class:"leave-confirm-content"},hn={class:"penalties"},gn={key:0},cs=10,bn=rs({__name:"MySect",setup(vs){const u=Ds(),a=Bs(),h=Rs(),_=ms(),b=A(!1),B=A(!1),q=A("overview"),y=A(null),z=A(1),R=w(()=>Math.ceil(a.totalMembers/cs)||1),H=w(()=>{if(!a.mySect||!a.nextRankInfo)return 0;const d=a.mySect.contribution,t=a.nextRankInfo.contributionRequired;return Math.min(100,d/t*100)}),D=w(()=>a.mySect&&Ts.specialPenalties[a.mySect.sectId]||null),T=w(()=>a.mySect?.sectId==="huangfeng"),v=w(()=>a.mySect?.sectId==="taiyi"),r=w(()=>a.mySect?.sectId==="heisha"),p=w(()=>a.mySect?.sectId==="wanling"),N=w(()=>a.mySect?.sectId==="hehuan"),fs=d=>({Leaf:Ws,Eye:es,Heart:P,Star:V,Rabbit:as,Skull:ts,Sword:Gs,Sun:es})[d]||V,_s=d=>({righteous:"正道",neutral:"中立",demonic:"魔道"})[d]||d,ys=d=>({1:"炼气期",2:"筑基期",3:"结丹期",4:"元婴期",5:"化神期",6:"炼虚期",7:"合体期",8:"大乘期",9:"渡劫期"})[d]||"未知",hs=d=>a.SECT_RANKS.find(I=>I.id===d)?.name||d,gs=d=>{if(!d)return"未知";const t=new Date(d),n=Math.floor((new Date().getTime()-t.getTime())/864e5);return n===0?"今日":n===1?"昨日":n<30?`${n}天前`:n<365?`${Math.floor(n/30)}个月前`:`${Math.floor(n/365)}年前`},O=(d=1)=>{a.loadSectMembers(d,cs)};Ns(z,d=>{O(d)});const bs=async()=>{const d=await a.claimSalary();d.success?_.success(d.message):_.warning(d.message)},ks=async()=>{const d=await a.checkIn();d.success?(_.success(d.message),d.bonus&&_.info(`额外奖励：${d.bonus.description}`)):_.warning(d.message)},Cs=async()=>{const d=await a.teach();d.success?_.success(d.message):_.warning(d.message)},Ss=async d=>{const t=await a.purchaseTreasuryItem(d);t.success?_.success(t.message):_.error(t.message)},ws=async()=>{if(!y.value||y.value<10){_.warning("捐献数量至少为10灵石");return}const d=await a.donate(y.value);d.success?(_.success(d.message),y.value=null):_.error(d.message)},$s=async d=>{const t=await a.acceptBounty(d);t.success?_.success(t.message):_.error(t.message)},zs=async d=>{const t=await a.abandonBounty(d);t.success?_.success(t.message):_.error(t.message)},Is=async()=>{const d=await a.promote();d.success?_.success(d.message):_.error(d.message)},Ms=async()=>{const d=await a.leaveSect();d.success?(b.value=!1,_.success(d.message),d.penalties&&d.penalties.forEach(t=>_.warning(t)),a.saveCooldown(),u.push("/sect/list")):_.error(d.message)};return ds(async()=>{await a.init(),a.hasSect&&O()}),(d,t)=>{const I=xs("router-link");return o(),c("div",it,[e(a).hasSect?(o(),c(k,{key:1},[s("div",{class:"sect-banner",style:S({"--sect-color":e(a).currentSect?.color})},[t[16]||(t[16]=s("div",{class:"banner-bg"},null,-1)),s("div",ct,[s("div",rt,[(o(),Ps(qs(fs(e(a).currentSect?.icon||"")),{size:40}))]),s("div",dt,[s("h1",ut,l(e(a).currentSect?.name),1),s("div",mt,[s("span",{class:C(["alignment-tag",e(a).currentSect?.alignment])},l(_s(e(a).currentSect?.alignment||"")),3),s("span",pt,[i(e(us),{size:12}),g(" "+l(e(a).currentRankInfo?.name),1)])])]),s("button",{class:"feature-btn",onClick:t[0]||(t[0]=n=>B.value=!0),title:"宗门特性"},[i(e(U),{size:16})]),s("button",{class:"leave-btn-small",onClick:t[1]||(t[1]=n=>b.value=!0),title:"叛出宗门"},[i(e(js),{size:16})])])],4),i(e(ae),{value:q.value,"onUpdate:value":t[9]||(t[9]=n=>q.value=n),type:"segment",animated:"",class:"sect-tabs"},{default:f(()=>[i(e(x),{name:"overview"},{tab:f(()=>[s("div",vt,[i(e(os),{size:14}),t[17]||(t[17]=s("span",null,"门务",-1))])]),default:f(()=>[s("div",ft,[s("div",_t,[s("div",yt,[s("div",ht,[i(e(os),{size:18}),t[18]||(t[18]=s("span",null,"点卯",-1)),s("span",gt,[i(e(Ys),{size:12}),g(" "+l(e(a).mySect?.checkInStreak||0)+"天 ",1)])]),s("button",{class:C(["daily-btn",{disabled:!e(a).canCheckIn}]),disabled:!e(a).canCheckIn,onClick:ks},l(e(a).canCheckIn?"立即点卯":"已点卯"),11,bt)]),s("div",kt,[s("div",Ct,[i(e(j),{size:18}),t[19]||(t[19]=s("span",null,"俸禄",-1)),s("span",St,l(e(a).dailySalary)+"灵石",1)]),s("button",{class:C(["daily-btn",{disabled:!e(a).canClaimSalary}]),disabled:!e(a).canClaimSalary,onClick:bs},l(e(a).canClaimSalary?"领取":"已领取"),11,wt)]),s("div",$t,[s("div",zt,[i(e(Ks),{size:18}),t[20]||(t[20]=s("span",null,"传功",-1)),s("span",It,l(e(a).remainingTeachCount)+"/3",1)]),s("button",{class:C(["daily-btn",{disabled:!e(a).canTeach}]),disabled:!e(a).canTeach,onClick:Cs},l(e(a).canTeach?"传功":"已用完"),11,Mt)])]),s("div",At,[s("div",Bt,[t[21]||(t[21]=s("div",{class:"status-label"},"门派身份",-1)),s("div",Rt,l(e(a).currentRankInfo?.name),1),s("div",Tt,"入门 "+l(gs(e(a).mySect?.joinedAt)),1)]),s("div",Nt,[t[22]||(t[22]=s("div",{class:"status-label"},"宗门贡献",-1)),s("div",xt,l(e(a).mySect?.contribution||0),1),e(a).nextRankInfo?(o(),c("div",Pt,"晋升需 "+l(e(a).nextRankInfo.contributionRequired),1)):m("",!0)])]),e(a).nextRankInfo?(o(),c("div",qt,[s("div",Dt,[t[23]||(t[23]=s("span",null,"晋升进度",-1)),s("span",Lt,l(e(a).mySect?.contribution)+" / "+l(e(a).nextRankInfo.contributionRequired),1)]),s("div",Ut,[s("div",{class:"progress-fill",style:S({width:H.value+"%"})},null,4)]),s("button",{class:C(["promote-btn",{disabled:!e(a).canPromote}]),disabled:!e(a).canPromote,onClick:Is},[i(e(Zs),{size:16}),s("span",null,"晋升为"+l(e(a).nextRankInfo.name),1)],10,Et)])):(o(),c("div",Ft,[i(e(V),{size:20}),t[24]||(t[24]=s("span",null,"已达最高职位",-1))])),T.value?(o(),c("div",Ht,[i(I,{to:"/garden",class:"special-feature-link garden-link"},{default:f(()=>[s("div",Ot,[i(e(Js),{size:24})]),t[25]||(t[25]=s("div",{class:"feature-info"},[s("span",{class:"feature-name"},"药园"),s("span",{class:"feature-desc"},"种植灵草、采收药材")],-1)),i(e(M),{size:18,class:"feature-arrow"})]),_:1})])):m("",!0),v.value?(o(),c("div",Qt,[i(I,{to:"/taiyi",class:"special-feature-link taiyi-link"},{default:f(()=>[s("div",Vt,[i(e(U),{size:24})]),t[26]||(t[26]=s("div",{class:"feature-info"},[s("span",{class:"feature-name"},"神识与引道"),s("span",{class:"feature-desc"},"参悟五行大道、锻炼神识")],-1)),i(e(M),{size:18,class:"feature-arrow"})]),_:1})])):m("",!0),r.value?(o(),c("div",jt,[i(I,{to:"/heisha",class:"special-feature-link heisha-link"},{default:f(()=>[s("div",Gt,[i(e(ts),{size:24})]),t[27]||(t[27]=s("div",{class:"feature-info"},[s("span",{class:"feature-name"},"魔道禁术"),s("span",{class:"feature-desc"},"夺舍魔功、魔染红尘、煞气淬体")],-1)),i(e(M),{size:18,class:"feature-arrow"})]),_:1})])):m("",!0),p.value?(o(),c("div",Wt,[i(I,{to:"/wanling",class:"special-feature-link wanling-link"},{default:f(()=>[s("div",Xt,[i(e(as),{size:24})]),t[28]||(t[28]=s("div",{class:"feature-info"},[s("span",{class:"feature-name"},"万灵秘术"),s("span",{class:"feature-desc"},"灵兽养成、寻觅灵兽、灵兽偷菜")],-1)),i(e(M),{size:18,class:"feature-arrow"})]),_:1})])):m("",!0),N.value?(o(),c("div",Yt,[i(I,{to:"/hehuan",class:"special-feature-link hehuan-link"},{default:f(()=>[s("div",Kt,[i(e(P),{size:24})]),t[29]||(t[29]=s("div",{class:"feature-info"},[s("span",{class:"feature-name"},"情缘三境"),s("span",{class:"feature-desc"},"闭关双修、缔结同参、种下心印")],-1)),i(e(M),{size:18,class:"feature-arrow"})]),_:1})])):m("",!0)])]),_:1}),i(e(x),{name:"members"},{tab:f(()=>[s("div",Zt,[i(e(ns),{size:14}),t[30]||(t[30]=s("span",null,"同门",-1))])]),default:f(()=>[s("div",Jt,[s("div",sa,[s("span",ea,"共 "+l(e(a).totalMembers)+" 位同门",1),s("button",{class:"refresh-btn",onClick:t[2]||(t[2]=n=>O(z.value)),disabled:e(a).loading},[i(e(se),{size:16,class:C({spinning:e(a).loading})},null,8,["class"])],8,ta)]),s("div",aa,[(o(!0),c(k,null,$(e(a).sectMembers,n=>(o(),c("div",{key:n.id,class:"member-item"},[s("div",na,[i(e(ee),{size:20}),s("span",{class:C(["online-dot",{online:n.isOnline}])},null,2)]),s("div",ia,[s("span",oa,l(n.name),1),s("span",la,l(hs(n.rank)),1)]),s("div",ca,l(ys(n.realmTier)),1)]))),128)),e(a).sectMembers.length===0?(o(),c("div",ra,[i(e(ns),{size:32}),t[31]||(t[31]=s("span",null,"暂无同门数据",-1))])):m("",!0)]),R.value>1?(o(),c("div",da,[s("button",{class:"page-btn",disabled:z.value===1,onClick:t[3]||(t[3]=n=>z.value--)},[i(e(Qs),{size:16})],8,ua),s("span",ma,l(z.value)+" / "+l(R.value),1),s("button",{class:"page-btn",disabled:z.value===R.value,onClick:t[4]||(t[4]=n=>z.value++)},[i(e(M),{size:16})],8,pa)])):m("",!0)])]),_:1}),i(e(x),{name:"bounties"},{tab:f(()=>[s("div",va,[i(e(W),{size:14}),t[32]||(t[32]=s("span",null,"悬赏",-1))])]),default:f(()=>[s("div",fa,[e(a).getActiveBounties().length>0?(o(),c("div",_a,[s("h3",ya,[i(e(te),{size:16}),t[33]||(t[33]=s("span",null,"进行中",-1))]),s("div",ha,[(o(!0),c(k,null,$(e(a).getActiveBounties(),n=>(o(),c("div",{key:n.id,class:"bounty-item active"},[s("div",ga,[s("span",{class:C(["bounty-type",n.type])},l(e(a).getBountyTypeName(n.type)),3),s("span",{class:"bounty-difficulty",style:S({color:e(a).getBountyDifficultyColor(n.difficulty)})},l(e(a).getBountyDifficultyName(n.difficulty)),5)]),s("h4",ba,l(n.name),1),s("p",ka,l(n.description),1),s("div",Ca,[s("div",Sa,[s("div",{class:"progress-fill",style:S({width:n.progress/n.requirement.amount*100+"%"})},null,4)]),s("span",wa,l(n.progress)+" / "+l(n.requirement.amount),1)]),s("div",$a,[s("span",za,[i(e(G),{size:14}),g(" "+l(n.rewards.contribution)+" 贡献 ",1)]),n.rewards.spiritStones?(o(),c("span",Ia,[i(e(j),{size:14}),g(" "+l(n.rewards.spiritStones)+" 灵石 ",1)])):m("",!0)]),s("button",{class:"abandon-btn",onClick:L=>zs(n.id)},[i(e(E),{size:14}),t[34]||(t[34]=g(" 放弃 ",-1))],8,Ma)]))),128))])])):m("",!0),s("h3",Aa,[i(e(W),{size:16}),t[35]||(t[35]=s("span",null,"可接取",-1))]),s("div",Ba,[(o(!0),c(k,null,$(e(a).getAvailableBounties().filter(n=>!n.isActive&&!n.isCompleted),n=>(o(),c("div",{key:n.id,class:C(["bounty-item",{disabled:!n.canAccept}])},[s("div",Ra,[s("span",{class:C(["bounty-type",n.type])},l(e(a).getBountyTypeName(n.type)),3),s("span",{class:"bounty-difficulty",style:S({color:e(a).getBountyDifficultyColor(n.difficulty)})},l(e(a).getBountyDifficultyName(n.difficulty)),5)]),s("h4",Ta,l(n.name),1),s("p",Na,l(n.description),1),s("div",xa,[s("span",Pa,[i(e(G),{size:14}),g(" "+l(n.rewards.contribution)+" 贡献 ",1)]),n.rewards.spiritStones?(o(),c("span",qa,[i(e(j),{size:14}),g(" "+l(n.rewards.spiritStones)+" 灵石 ",1)])):m("",!0)]),s("button",{class:"accept-btn",disabled:!n.canAccept,onClick:L=>$s(n.id)},[n.canAccept?(o(),c(k,{key:0},[i(e(Y),{size:14}),t[36]||(t[36]=g(" 接取 ",-1))],64)):(o(),c(k,{key:1},[g(l(n.reason),1)],64))],8,Da)],2))),128)),(o(!0),c(k,null,$(e(a).getAvailableBounties().filter(n=>n.isCompleted),n=>(o(),c("div",{key:n.id+"-completed",class:"bounty-item completed"},[s("div",La,[s("span",{class:C(["bounty-type",n.type])},l(e(a).getBountyTypeName(n.type)),3),s("span",Ua,[i(e(Y),{size:12}),t[37]||(t[37]=g(" 已完成 ",-1))])]),s("h4",Ea,l(n.name),1),s("p",Fa,l(n.description),1)]))),128))]),e(a).getAvailableBounties().length===0&&e(a).getActiveBounties().length===0?(o(),c("div",Ha,[i(e(W),{size:32}),t[38]||(t[38]=s("span",null,"暂无可接取的悬赏",-1))])):m("",!0)])]),_:1}),i(e(x),{name:"treasury"},{tab:f(()=>[s("div",Oa,[i(e(is),{size:14}),t[39]||(t[39]=s("span",null,"宝库",-1))])]),default:f(()=>[s("div",Qa,[s("div",Va,[s("div",ja,[i(e(ls),{size:18}),t[40]||(t[40]=s("span",null,"宗门捐献",-1))]),t[42]||(t[42]=s("p",{class:"donate-hint"},"捐献灵石可获得宗门贡献（10灵石 = 1贡献）",-1)),s("div",Ga,[i(e(ne),{value:y.value,"onUpdate:value":t[5]||(t[5]=n=>y.value=n),min:10,max:Number(e(h).character?.spiritStones||0),step:10,placeholder:"输入捐献数量",style:{flex:"1"}},null,8,["value","max"]),s("button",{class:"quick-btn",onClick:t[6]||(t[6]=n=>y.value=100)},"100"),s("button",{class:"quick-btn",onClick:t[7]||(t[7]=n=>y.value=500)},"500"),s("button",{class:"quick-btn",onClick:t[8]||(t[8]=n=>y.value=1e3)},"1000")]),y.value&&y.value>0?(o(),c("div",Wa," 捐献 "+l(y.value)+" 灵石，可获得 "+l(e(a).calculateDonationContribution(y.value))+" 贡献 ",1)):m("",!0),s("button",{class:"donate-btn",disabled:!y.value||y.value<10||y.value>Number(e(h).character?.spiritStones||0),onClick:ws},[i(e(ls),{size:16}),t[41]||(t[41]=s("span",null,"确认捐献",-1))],8,Xa)]),s("div",Ya,[s("h3",Ka,[i(e(is),{size:18}),t[43]||(t[43]=s("span",null,"宝库物品",-1))]),s("div",Za,[(o(!0),c(k,null,$(e(a).getTreasuryItems(),n=>(o(),c("div",{key:n.id,class:C(["treasury-item-compact",{disabled:!e(a).canBuyItem(n).canBuy}]),style:S({"--quality-color":e(a).getQualityColor(n.quality)})},[s("div",Ja,[s("div",{class:"item-icon",style:S({background:`${e(a).getQualityColor(n.quality)}15`,color:e(a).getQualityColor(n.quality)})},[i(e(U),{size:18})],4),s("div",sn,[s("div",en,[s("span",{class:"item-name",style:S({color:e(a).getQualityColor(n.quality)})},l(n.name),5),s("span",{class:"item-quality-dot",style:S({background:e(a).getQualityColor(n.quality)})},null,4)]),s("p",tn,l(n.description),1),s("div",an,[n.effect?(o(),c("span",nn,l(n.effect),1)):m("",!0),n.limitPerDay?(o(),c("span",on,"日限"+l(n.limitPerDay),1)):m("",!0),n.limitTotal?(o(),c("span",ln,"限"+l(n.limitTotal),1)):m("",!0)])])]),s("div",cn,[s("div",rn,[i(e(G),{size:12}),s("span",null,l(n.contributionCost),1)]),s("button",{class:"buy-btn-compact",disabled:!e(a).canBuyItem(n).canBuy,onClick:L=>Ss(n.id)},l(e(a).canBuyItem(n).canBuy?"兑换":e(a).canBuyItem(n).reason),9,dn)])],6))),128))])])])]),_:1}),i(e(x),{name:"diplomacy"},{tab:f(()=>[s("div",un,[i(e(K),{size:14}),t[44]||(t[44]=s("span",null,"外交",-1))])]),default:f(()=>[s("div",mn,[i(nt)])]),_:1})]),_:1},8,["value"])],64)):(o(),c("div",ot,[s("div",lt,[i(e(Vs),{size:64})]),t[14]||(t[14]=s("h2",null,"尚未拜入宗门",-1)),t[15]||(t[15]=s("p",null,"散修之路艰辛，拜入宗门方有依仗",-1)),i(I,{to:"/sect/list",class:"join-link"},{default:f(()=>[i(e(Xs),{size:18}),t[13]||(t[13]=s("span",null,"前往拜入宗门",-1))]),_:1})])),i(e(J),{show:B.value,"onUpdate:show":t[10]||(t[10]=n=>B.value=n),preset:"card",style:{width:"90%","max-width":"400px"}},{header:f(()=>[s("div",pn,[i(e(U),{size:18}),s("span",null,l(e(a).currentSect?.name)+" · 宗门特性",1)])]),default:f(()=>[s("div",vn,[(o(!0),c(k,null,$(e(a).currentSect?.features,(n,L)=>(o(),c("div",{key:L,class:"feature-modal-item"},[s("div",fn,l(n.name),1),s("div",_n,l(n.description),1)]))),128))])]),_:1},8,["show"]),i(e(J),{show:b.value,"onUpdate:show":t[12]||(t[12]=n=>b.value=n),preset:"dialog",type:"warning"},{header:f(()=>[...t[45]||(t[45]=[s("span",null,"确认叛出",-1)])]),action:f(()=>[i(e(ss),{onClick:t[11]||(t[11]=n=>b.value=!1)},{default:f(()=>[...t[51]||(t[51]=[g("取消",-1)])]),_:1}),i(e(ss),{type:"error",loading:e(a).loading,onClick:Ms},{default:f(()=>[...t[52]||(t[52]=[g("确认叛出",-1)])]),_:1},8,["loading"])]),default:f(()=>[s("div",yn,[s("p",null,[t[46]||(t[46]=g(" 确定要叛出 ",-1)),s("strong",null,l(e(a).currentSect?.name),1),t[47]||(t[47]=g(" 吗？ ",-1))]),s("div",hn,[t[50]||(t[50]=s("h4",null,"叛出代价：",-1)),s("ul",null,[t[48]||(t[48]=s("li",null,"清空所有宗门贡献",-1)),D.value?(o(),c("li",gn,l(D.value),1)):m("",!0),t[49]||(t[49]=s("li",null,"进入4小时叛门冷却期",-1))])])])]),_:1},8,["show"])])}}}),_i=ps(bn,[["__scopeId","data-v-4046fade"]]);export{_i as default};
